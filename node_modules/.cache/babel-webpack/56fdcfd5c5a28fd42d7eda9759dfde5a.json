{"ast":null,"code":"import _classCallCheck from \"/Users/mac/WebstormProjects/github-page/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mac/WebstormProjects/github-page/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { __decorate, __metadata } from 'tslib';\nimport { Directionality, BidiModule } from '@angular/cdk/bidi';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport { Component, ChangeDetectionStrategy, ViewEncapsulation, EventEmitter, ChangeDetectorRef, ViewChild, Injector, Injectable, Optional, Directive, Inject, ElementRef, Input, NgModule } from '@angular/core';\nimport { NzConfigService, WithConfig } from 'ng-zorro-antd/core/config';\nimport { isNotNil, InputBoolean } from 'ng-zorro-antd/core/util';\nimport { Subject } from 'rxjs';\nimport { filter, take, takeUntil } from 'rxjs/operators';\nimport { OverlayRef, OverlayConfig, Overlay, OverlayModule } from '@angular/cdk/overlay';\nimport { ComponentPortal, PortalModule } from '@angular/cdk/portal';\nimport { ESCAPE, hasModifierKey } from '@angular/cdk/keycodes';\nimport { fadeMotion } from 'ng-zorro-antd/core/animation';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzPipesModule } from 'ng-zorro-antd/pipes';\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from 'ng-zorro-antd/core/config';\nimport * as ɵngcc2 from '@angular/cdk/overlay';\nimport * as ɵngcc3 from '@angular/common';\nimport * as ɵngcc4 from '@angular/cdk/drag-drop';\nimport * as ɵngcc5 from 'ng-zorro-antd/icon';\nimport * as ɵngcc6 from '@angular/cdk/bidi';\nvar _c0 = [\"*\"];\nvar _c1 = [\"imgRef\"];\n\nfunction NzImagePreviewComponent_li_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function NzImagePreviewComponent_li_5_Template_li_click_0_listener() {\n      var option_r3 = ctx.$implicit;\n      return option_r3.onClick();\n    });\n    ɵngcc0.ɵɵelement(1, \"span\", 10);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var option_r3 = ctx.$implicit;\n    var ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"ant-image-preview-operations-operation-disabled\", ctx_r0.zoomOutDisabled && option_r3.type === \"zoomOut\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"nzType\", option_r3.icon);\n  }\n}\n\nfunction NzImagePreviewComponent_ng_container_7_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 12, 13);\n  }\n\n  if (rf & 2) {\n    var image_r5 = ɵngcc0.ɵɵnextContext().$implicit;\n    var ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"width\", image_r5.width)(\"height\", image_r5.height)(\"transform\", ctx_r7.previewImageTransform);\n    ɵngcc0.ɵɵattribute(\"src\", image_r5.src, ɵngcc0.ɵɵsanitizeUrl)(\"alt\", image_r5.alt);\n  }\n}\n\nfunction NzImagePreviewComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NzImagePreviewComponent_ng_container_7_img_1_Template, 2, 8, \"img\", 11);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    var imageIndex_r6 = ctx.index;\n    var ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.index === imageIndex_r6);\n  }\n}\n\nfunction NzImagePreviewComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r11 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function NzImagePreviewComponent_ng_container_8_Template_div_click_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r11);\n      var ctx_r10 = ɵngcc0.ɵɵnextContext();\n      return ctx_r10.onSwitchLeft($event);\n    });\n    ɵngcc0.ɵɵelement(2, \"span\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"div\", 16);\n    ɵngcc0.ɵɵlistener(\"click\", function NzImagePreviewComponent_ng_container_8_Template_div_click_3_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r11);\n      var ctx_r12 = ɵngcc0.ɵɵnextContext();\n      return ctx_r12.onSwitchRight($event);\n    });\n    ɵngcc0.ɵɵelement(4, \"span\", 17);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"ant-image-preview-switch-left-disabled\", ctx_r2.index <= 0);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"ant-image-preview-switch-right-disabled\", ctx_r2.index >= ctx_r2.images.length - 1);\n  }\n}\n\nvar NzImageGroupComponent = /*#__PURE__*/function () {\n  function NzImageGroupComponent() {\n    _classCallCheck(this, NzImageGroupComponent);\n\n    this.images = [];\n  }\n\n  _createClass(NzImageGroupComponent, [{\n    key: \"addImage\",\n    value: function addImage(image) {\n      this.images.push(image);\n    }\n  }]);\n\n  return NzImageGroupComponent;\n}();\n\nNzImageGroupComponent.ɵfac = function NzImageGroupComponent_Factory(t) {\n  return new (t || NzImageGroupComponent)();\n};\n\nNzImageGroupComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: NzImageGroupComponent,\n  selectors: [[\"nz-image-group\"]],\n  exportAs: [\"nzImageGroup\"],\n  ngContentSelectors: _c0,\n  decls: 1,\n  vars: 0,\n  template: function NzImageGroupComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵprojectionDef();\n      ɵngcc0.ɵɵprojection(0);\n    }\n  },\n  encapsulation: 2,\n  changeDetection: 0\n});\nvar FADE_CLASS_NAME_MAP = {\n  enter: 'ant-fade-enter',\n  enterActive: 'ant-fade-enter-active',\n  leave: 'ant-fade-leave',\n  leaveActive: 'ant-fade-leave-active'\n};\nvar IMAGE_PREVIEW_MASK_CLASS_NAME = 'ant-image-preview-mask';\nvar NZ_CONFIG_MODULE_NAME = 'image';\n\nvar NzImagePreviewOptions = function NzImagePreviewOptions() {\n  _classCallCheck(this, NzImagePreviewOptions);\n\n  this.nzKeyboard = true;\n  this.nzNoAnimation = false;\n  this.nzMaskClosable = true;\n  this.nzCloseOnNavigation = true;\n};\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nvar NzImagePreviewRef = /*#__PURE__*/function () {\n  function NzImagePreviewRef(previewInstance, config, overlayRef) {\n    var _this = this;\n\n    _classCallCheck(this, NzImagePreviewRef);\n\n    this.previewInstance = previewInstance;\n    this.config = config;\n    this.overlayRef = overlayRef;\n    overlayRef.keydownEvents().pipe(filter(function (event) {\n      return _this.config.nzKeyboard && event.keyCode === ESCAPE && !hasModifierKey(event);\n    })).subscribe(function (event) {\n      event.preventDefault();\n\n      _this.close();\n    });\n    overlayRef.detachments().subscribe(function () {\n      _this.overlayRef.dispose();\n    });\n    previewInstance.containerClick.pipe(take(1)).subscribe(function () {\n      _this.close();\n    });\n    previewInstance.closeClick.pipe(take(1)).subscribe(function () {\n      _this.close();\n    });\n    previewInstance.animationStateChanged.pipe(filter(function (event) {\n      return event.phaseName === 'done' && event.toState === 'leave';\n    }), take(1)).subscribe(function () {\n      _this.dispose();\n    });\n  }\n\n  _createClass(NzImagePreviewRef, [{\n    key: \"switchTo\",\n    value: function switchTo(index) {\n      this.previewInstance.switchTo(index);\n    }\n  }, {\n    key: \"next\",\n    value: function next() {\n      this.previewInstance.next();\n    }\n  }, {\n    key: \"prev\",\n    value: function prev() {\n      this.previewInstance.prev();\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.previewInstance.startLeaveAnimation();\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.overlayRef.dispose();\n    }\n  }]);\n\n  return NzImagePreviewRef;\n}();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * fit content details: https://github.com/NG-ZORRO/ng-zorro-antd/pull/6154#issuecomment-745025554\n *\n * calc position x,y point\n *\n * CASE (width <= clientWidth && height <= clientHeight):\n *\n * ------------- clientWidth -------------\n * |                                     |\n * |        ------ width ------          |\n * |        |                 |          |\n * |        |                 |          |\n * client   height            |          |\n * Height   |                 |          |\n * |        |                 |          |\n * |        -------------------          |\n * |                                     |\n * |                                     |\n * ---------------------------------------\n * fixedPosition = { x: 0, y: 0 }\n *\n *\n *\n * CASE (width > clientWidth || height > clientHeight):\n *\n * ------------- clientWidth -------------\n * |        |                            |\n * |        top                          |\n * |        |                            |\n * |--left--|--------------- width -----------------\n * |        |                                      |\n * client   |                                      |\n * Height   |                                      |\n * |        |                                      |\n * |        |                                      |\n * |        height                                 |\n * |        |                                      |\n * ---------|                                      |\n *          |                                      |\n *          |                                      |\n *          |                                      |\n *          ----------------------------------------\n *\n *\n * - left || top > 0\n *   left -> 0 || top -> 0\n *\n * - (left + width) < clientWidth || (top + height) < clientHeight\n * - left | top + width | height < clientWidth | clientHeight -> Back left | top + width | height === clientWidth | clientHeight\n *\n * DEFAULT:\n * - hold position\n *\n */\n\n\nfunction getFitContentPosition(params) {\n  var fixPos = {};\n\n  if (params.width <= params.clientWidth && params.height <= params.clientHeight) {\n    fixPos = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  if (params.width > params.clientWidth || params.height > params.clientHeight) {\n    fixPos = {\n      x: fitPoint(params.left, params.width, params.clientWidth),\n      y: fitPoint(params.top, params.height, params.clientHeight)\n    };\n  }\n\n  return fixPos;\n}\n\nfunction getOffset(node) {\n  var box = node.getBoundingClientRect();\n  var docElem = document.documentElement; // use docElem.scrollLeft to support IE\n\n  return {\n    left: box.left + (window.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || document.body.clientLeft || 0),\n    top: box.top + (window.pageYOffset || docElem.scrollTop) - (docElem.clientTop || document.body.clientTop || 0)\n  };\n}\n\nfunction getClientSize() {\n  var width = document.documentElement.clientWidth;\n  var height = window.innerHeight || document.documentElement.clientHeight;\n  return {\n    width: width,\n    height: height\n  };\n}\n\nfunction fitPoint(start, size, clientSize) {\n  var startAddSize = start + size;\n  var offsetStart = (size - clientSize) / 2;\n  var distance = null;\n\n  if (size > clientSize) {\n    if (start > 0) {\n      distance = offsetStart;\n    }\n\n    if (start < 0 && startAddSize < clientSize) {\n      distance = -offsetStart;\n    }\n  } else {\n    if (start < 0 || startAddSize > clientSize) {\n      distance = start < 0 ? offsetStart : -offsetStart;\n    }\n  }\n\n  return distance;\n}\n\nvar initialPosition = {\n  x: 0,\n  y: 0\n};\n\nvar NzImagePreviewComponent = /*#__PURE__*/function () {\n  function NzImagePreviewComponent(cdr, nzConfigService, config, overlayRef) {\n    var _this2 = this;\n\n    _classCallCheck(this, NzImagePreviewComponent);\n\n    var _a, _b;\n\n    this.cdr = cdr;\n    this.nzConfigService = nzConfigService;\n    this.config = config;\n    this.overlayRef = overlayRef;\n    this.images = [];\n    this.index = 0;\n    this.isDragging = false;\n    this.visible = true;\n    this.animationState = 'enter';\n    this.animationStateChanged = new EventEmitter();\n    this.previewImageTransform = '';\n    this.previewImageWrapperTransform = '';\n    this.operations = [{\n      icon: 'close',\n      onClick: function onClick() {\n        _this2.onClose();\n      },\n      type: 'close'\n    }, {\n      icon: 'zoom-in',\n      onClick: function onClick() {\n        _this2.onZoomIn();\n      },\n      type: 'zoomIn'\n    }, {\n      icon: 'zoom-out',\n      onClick: function onClick() {\n        _this2.onZoomOut();\n      },\n      type: 'zoomOut'\n    }, {\n      icon: 'rotate-right',\n      onClick: function onClick() {\n        _this2.onRotateRight();\n      },\n      type: 'rotateRight'\n    }, {\n      icon: 'rotate-left',\n      onClick: function onClick() {\n        _this2.onRotateLeft();\n      },\n      type: 'rotateLeft'\n    }];\n    this.zoomOutDisabled = false;\n    this.position = Object.assign({}, initialPosition);\n    this.containerClick = new EventEmitter();\n    this.closeClick = new EventEmitter();\n    this.destroy$ = new Subject(); // TODO: move to host after View Engine deprecation\n\n    this.zoom = (_a = this.config.nzZoom) !== null && _a !== void 0 ? _a : 1;\n    this.rotate = (_b = this.config.nzRotate) !== null && _b !== void 0 ? _b : 0;\n    this.updateZoomOutDisabled();\n    this.updatePreviewImageTransform();\n    this.updatePreviewImageWrapperTransform();\n  }\n\n  _createClass(NzImagePreviewComponent, [{\n    key: \"animationDisabled\",\n    get: function get() {\n      var _a;\n\n      return (_a = this.config.nzNoAnimation) !== null && _a !== void 0 ? _a : false;\n    }\n  }, {\n    key: \"maskClosable\",\n    get: function get() {\n      var _a, _b;\n\n      var defaultConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_MODULE_NAME) || {};\n      return (_b = (_a = this.config.nzMaskClosable) !== null && _a !== void 0 ? _a : defaultConfig.nzMaskClosable) !== null && _b !== void 0 ? _b : true;\n    }\n  }, {\n    key: \"setImages\",\n    value: function setImages(images) {\n      this.images = images;\n      this.cdr.markForCheck();\n    }\n  }, {\n    key: \"switchTo\",\n    value: function switchTo(index) {\n      this.index = index;\n      this.cdr.markForCheck();\n    }\n  }, {\n    key: \"next\",\n    value: function next() {\n      if (this.index < this.images.length - 1) {\n        this.reset();\n        this.index++;\n        this.updatePreviewImageTransform();\n        this.updatePreviewImageWrapperTransform();\n        this.updateZoomOutDisabled();\n        this.cdr.markForCheck();\n      }\n    }\n  }, {\n    key: \"prev\",\n    value: function prev() {\n      if (this.index > 0) {\n        this.reset();\n        this.index--;\n        this.updatePreviewImageTransform();\n        this.updatePreviewImageWrapperTransform();\n        this.updateZoomOutDisabled();\n        this.cdr.markForCheck();\n      }\n    }\n  }, {\n    key: \"markForCheck\",\n    value: function markForCheck() {\n      this.cdr.markForCheck();\n    }\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      this.closeClick.emit();\n    }\n  }, {\n    key: \"onZoomIn\",\n    value: function onZoomIn() {\n      this.zoom += 1;\n      this.updatePreviewImageTransform();\n      this.updateZoomOutDisabled();\n      this.position = Object.assign({}, initialPosition);\n    }\n  }, {\n    key: \"onZoomOut\",\n    value: function onZoomOut() {\n      if (this.zoom > 1) {\n        this.zoom -= 1;\n        this.updatePreviewImageTransform();\n        this.updateZoomOutDisabled();\n        this.position = Object.assign({}, initialPosition);\n      }\n    }\n  }, {\n    key: \"onRotateRight\",\n    value: function onRotateRight() {\n      this.rotate += 90;\n      this.updatePreviewImageTransform();\n    }\n  }, {\n    key: \"onRotateLeft\",\n    value: function onRotateLeft() {\n      this.rotate -= 90;\n      this.updatePreviewImageTransform();\n    }\n  }, {\n    key: \"onSwitchLeft\",\n    value: function onSwitchLeft(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.prev();\n    }\n  }, {\n    key: \"onSwitchRight\",\n    value: function onSwitchRight(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.next();\n    }\n  }, {\n    key: \"onContainerClick\",\n    value: function onContainerClick(e) {\n      if (e.target === e.currentTarget && this.maskClosable) {\n        this.containerClick.emit();\n      }\n    }\n  }, {\n    key: \"onAnimationStart\",\n    value: function onAnimationStart(event) {\n      if (event.toState === 'enter') {\n        this.setEnterAnimationClass();\n      } else if (event.toState === 'leave') {\n        this.setLeaveAnimationClass();\n      }\n\n      this.animationStateChanged.emit(event);\n    }\n  }, {\n    key: \"onAnimationDone\",\n    value: function onAnimationDone(event) {\n      if (event.toState === 'enter') {\n        this.setEnterAnimationClass();\n      } else if (event.toState === 'leave') {\n        this.setLeaveAnimationClass();\n      }\n\n      this.animationStateChanged.emit(event);\n    }\n  }, {\n    key: \"startLeaveAnimation\",\n    value: function startLeaveAnimation() {\n      this.animationState = 'leave';\n      this.cdr.markForCheck();\n    }\n  }, {\n    key: \"onDragStarted\",\n    value: function onDragStarted() {\n      this.isDragging = true;\n    }\n  }, {\n    key: \"onDragReleased\",\n    value: function onDragReleased() {\n      this.isDragging = false;\n      var width = this.imageRef.nativeElement.offsetWidth * this.zoom;\n      var height = this.imageRef.nativeElement.offsetHeight * this.zoom;\n\n      var _getOffset = getOffset(this.imageRef.nativeElement),\n          left = _getOffset.left,\n          top = _getOffset.top;\n\n      var _getClientSize = getClientSize(),\n          clientWidth = _getClientSize.width,\n          clientHeight = _getClientSize.height;\n\n      var isRotate = this.rotate % 180 !== 0;\n      var fitContentParams = {\n        width: isRotate ? height : width,\n        height: isRotate ? width : height,\n        left: left,\n        top: top,\n        clientWidth: clientWidth,\n        clientHeight: clientHeight\n      };\n      var fitContentPos = getFitContentPosition(fitContentParams);\n\n      if (isNotNil(fitContentPos.x) || isNotNil(fitContentPos.y)) {\n        this.position = Object.assign(Object.assign({}, this.position), fitContentPos);\n      }\n    }\n  }, {\n    key: \"ngOnDestroy\",\n    value: function ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n  }, {\n    key: \"updatePreviewImageTransform\",\n    value: function updatePreviewImageTransform() {\n      this.previewImageTransform = \"scale3d(\".concat(this.zoom, \", \").concat(this.zoom, \", 1) rotate(\").concat(this.rotate, \"deg)\");\n    }\n  }, {\n    key: \"updatePreviewImageWrapperTransform\",\n    value: function updatePreviewImageWrapperTransform() {\n      this.previewImageWrapperTransform = \"translate3d(\".concat(this.position.x, \"px, \").concat(this.position.y, \"px, 0)\");\n    }\n  }, {\n    key: \"updateZoomOutDisabled\",\n    value: function updateZoomOutDisabled() {\n      this.zoomOutDisabled = this.zoom <= 1;\n    }\n  }, {\n    key: \"setEnterAnimationClass\",\n    value: function setEnterAnimationClass() {\n      if (this.animationDisabled) {\n        return;\n      }\n\n      var backdropElement = this.overlayRef.backdropElement;\n\n      if (backdropElement) {\n        backdropElement.classList.add(FADE_CLASS_NAME_MAP.enter);\n        backdropElement.classList.add(FADE_CLASS_NAME_MAP.enterActive);\n      }\n    }\n  }, {\n    key: \"setLeaveAnimationClass\",\n    value: function setLeaveAnimationClass() {\n      if (this.animationDisabled) {\n        return;\n      }\n\n      var backdropElement = this.overlayRef.backdropElement;\n\n      if (backdropElement) {\n        backdropElement.classList.add(FADE_CLASS_NAME_MAP.leave);\n        backdropElement.classList.add(FADE_CLASS_NAME_MAP.leaveActive);\n      }\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.zoom = 1;\n      this.rotate = 0;\n      this.position = Object.assign({}, initialPosition);\n    }\n  }]);\n\n  return NzImagePreviewComponent;\n}();\n\nNzImagePreviewComponent.ɵfac = function NzImagePreviewComponent_Factory(t) {\n  return new (t || NzImagePreviewComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NzConfigService), ɵngcc0.ɵɵdirectiveInject(NzImagePreviewOptions), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.OverlayRef));\n};\n\nNzImagePreviewComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: NzImagePreviewComponent,\n  selectors: [[\"nz-image-preview\"]],\n  viewQuery: function NzImagePreviewComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c1, 5);\n    }\n\n    if (rf & 2) {\n      var _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.imageRef = _t.first);\n    }\n  },\n  hostAttrs: [\"tabindex\", \"-1\", \"role\", \"document\"],\n  hostVars: 8,\n  hostBindings: function NzImagePreviewComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵsyntheticHostListener(\"@fadeMotion.start\", function NzImagePreviewComponent_animation_fadeMotion_start_HostBindingHandler($event) {\n        return ctx.onAnimationStart($event);\n      })(\"@fadeMotion.done\", function NzImagePreviewComponent_animation_fadeMotion_done_HostBindingHandler($event) {\n        return ctx.onAnimationDone($event);\n      });\n      ɵngcc0.ɵɵlistener(\"click\", function NzImagePreviewComponent_click_HostBindingHandler($event) {\n        return ctx.onContainerClick($event);\n      });\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵsyntheticHostProperty(\"@.disabled\", ctx.config.nzNoAnimation)(\"@fadeMotion\", ctx.animationState);\n      ɵngcc0.ɵɵstyleProp(\"z-index\", ctx.config.nzZIndex);\n      ɵngcc0.ɵɵclassProp(\"ant-image-preview-moving\", ctx.isDragging)(\"ant-image-preview-wrap\", true);\n    }\n  },\n  exportAs: [\"nzImagePreview\"],\n  decls: 10,\n  vars: 6,\n  consts: [[1, \"ant-image-preview\"], [\"tabindex\", \"0\", \"aria-hidden\", \"true\", 2, \"width\", \"0\", \"height\", \"0\", \"overflow\", \"hidden\", \"outline\", \"none\"], [1, \"ant-image-preview-content\"], [1, \"ant-image-preview-body\"], [1, \"ant-image-preview-operations\"], [\"class\", \"ant-image-preview-operations-operation\", 3, \"ant-image-preview-operations-operation-disabled\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDrag\", \"\", 1, \"ant-image-preview-img-wrapper\", 3, \"cdkDragFreeDragPosition\", \"mousedown\", \"cdkDragReleased\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"ant-image-preview-operations-operation\", 3, \"click\"], [\"nz-icon\", \"\", \"nzTheme\", \"outline\", 1, \"ant-image-preview-operations-icon\", 3, \"nzType\"], [\"cdkDragHandle\", \"\", \"class\", \"ant-image-preview-img\", 3, \"width\", \"height\", \"transform\", 4, \"ngIf\"], [\"cdkDragHandle\", \"\", 1, \"ant-image-preview-img\"], [\"imgRef\", \"\"], [1, \"ant-image-preview-switch-left\", 3, \"click\"], [\"nz-icon\", \"\", \"nzType\", \"left\", \"nzTheme\", \"outline\"], [1, \"ant-image-preview-switch-right\", 3, \"click\"], [\"nz-icon\", \"\", \"nzType\", \"right\", \"nzTheme\", \"outline\"]],\n  template: function NzImagePreviewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n      ɵngcc0.ɵɵelement(1, \"div\", 1);\n      ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n      ɵngcc0.ɵɵelementStart(3, \"div\", 3);\n      ɵngcc0.ɵɵelementStart(4, \"ul\", 4);\n      ɵngcc0.ɵɵtemplate(5, NzImagePreviewComponent_li_5_Template, 2, 3, \"li\", 5);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementStart(6, \"div\", 6);\n      ɵngcc0.ɵɵlistener(\"mousedown\", function NzImagePreviewComponent_Template_div_mousedown_6_listener() {\n        return ctx.onDragStarted();\n      })(\"cdkDragReleased\", function NzImagePreviewComponent_Template_div_cdkDragReleased_6_listener() {\n        return ctx.onDragReleased();\n      });\n      ɵngcc0.ɵɵtemplate(7, NzImagePreviewComponent_ng_container_7_Template, 2, 1, \"ng-container\", 7);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(8, NzImagePreviewComponent_ng_container_8_Template, 5, 4, \"ng-container\", 8);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelement(9, \"div\", 1);\n      ɵngcc0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(5);\n      ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.operations);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵstyleProp(\"transform\", ctx.previewImageWrapperTransform);\n      ɵngcc0.ɵɵproperty(\"cdkDragFreeDragPosition\", ctx.position);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.images);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.images.length > 1);\n    }\n  },\n  directives: [ɵngcc3.NgForOf, ɵngcc4.CdkDrag, ɵngcc3.NgIf, ɵngcc5.NzIconDirective, ɵngcc4.CdkDragHandle],\n  encapsulation: 2,\n  data: {\n    animation: [fadeMotion]\n  },\n  changeDetection: 0\n});\n\nNzImagePreviewComponent.ctorParameters = function () {\n  return [{\n    type: ChangeDetectorRef\n  }, {\n    type: NzConfigService\n  }, {\n    type: NzImagePreviewOptions\n  }, {\n    type: OverlayRef\n  }];\n};\n\nNzImagePreviewComponent.propDecorators = {\n  imageRef: [{\n    type: ViewChild,\n    args: ['imgRef']\n  }]\n};\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nvar NzImageService = /*#__PURE__*/function () {\n  function NzImageService(overlay, injector, nzConfigService, directionality) {\n    _classCallCheck(this, NzImageService);\n\n    this.overlay = overlay;\n    this.injector = injector;\n    this.nzConfigService = nzConfigService;\n    this.directionality = directionality;\n  }\n\n  _createClass(NzImageService, [{\n    key: \"preview\",\n    value: function preview(images, options) {\n      return this.display(images, options);\n    }\n  }, {\n    key: \"display\",\n    value: function display(images, config) {\n      var configMerged = Object.assign(Object.assign({}, new NzImagePreviewOptions()), config !== null && config !== void 0 ? config : {});\n      var overlayRef = this.createOverlay(configMerged);\n      var previewComponent = this.attachPreviewComponent(overlayRef, configMerged);\n      previewComponent.setImages(images);\n      var previewRef = new NzImagePreviewRef(previewComponent, configMerged, overlayRef);\n      previewComponent.previewRef = previewRef;\n      return previewRef;\n    }\n  }, {\n    key: \"attachPreviewComponent\",\n    value: function attachPreviewComponent(overlayRef, config) {\n      var injector = Injector.create({\n        parent: this.injector,\n        providers: [{\n          provide: OverlayRef,\n          useValue: overlayRef\n        }, {\n          provide: NzImagePreviewOptions,\n          useValue: config\n        }]\n      });\n      var containerPortal = new ComponentPortal(NzImagePreviewComponent, null, injector);\n      var containerRef = overlayRef.attach(containerPortal);\n      return containerRef.instance;\n    }\n  }, {\n    key: \"createOverlay\",\n    value: function createOverlay(config) {\n      var _a, _b;\n\n      var globalConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_MODULE_NAME) || {};\n      var overLayConfig = new OverlayConfig({\n        hasBackdrop: true,\n        scrollStrategy: this.overlay.scrollStrategies.block(),\n        positionStrategy: this.overlay.position().global(),\n        disposeOnNavigation: (_b = (_a = config.nzCloseOnNavigation) !== null && _a !== void 0 ? _a : globalConfig.nzCloseOnNavigation) !== null && _b !== void 0 ? _b : true,\n        backdropClass: IMAGE_PREVIEW_MASK_CLASS_NAME,\n        direction: config.nzDirection || globalConfig.nzDirection || this.directionality.value\n      });\n      return this.overlay.create(overLayConfig);\n    }\n  }]);\n\n  return NzImageService;\n}();\n\nNzImageService.ɵfac = function NzImageService_Factory(t) {\n  return new (t || NzImageService)(ɵngcc0.ɵɵinject(ɵngcc2.Overlay), ɵngcc0.ɵɵinject(ɵngcc0.Injector), ɵngcc0.ɵɵinject(ɵngcc1.NzConfigService), ɵngcc0.ɵɵinject(ɵngcc6.Directionality, 8));\n};\n\nNzImageService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: NzImageService,\n  factory: NzImageService.ɵfac\n});\n\nNzImageService.ctorParameters = function () {\n  return [{\n    type: Overlay\n  }, {\n    type: Injector\n  }, {\n    type: NzConfigService\n  }, {\n    type: Directionality,\n    decorators: [{\n      type: Optional\n    }]\n  }];\n};\n\nvar NZ_CONFIG_MODULE_NAME$1 = 'image';\n\nvar NzImageDirective = /*#__PURE__*/function () {\n  function NzImageDirective(document, nzConfigService, elementRef, nzImageService, cdr, parentGroup, directionality) {\n    _classCallCheck(this, NzImageDirective);\n\n    this.document = document;\n    this.nzConfigService = nzConfigService;\n    this.elementRef = elementRef;\n    this.nzImageService = nzImageService;\n    this.cdr = cdr;\n    this.parentGroup = parentGroup;\n    this.directionality = directionality;\n    this._nzModuleName = NZ_CONFIG_MODULE_NAME$1;\n    this.nzSrc = '';\n    this.nzDisablePreview = false;\n    this.nzFallback = null;\n    this.nzPlaceholder = null;\n    this.status = 'normal';\n    this.destroy$ = new Subject();\n  }\n\n  _createClass(NzImageDirective, [{\n    key: \"previewable\",\n    get: function get() {\n      return !this.nzDisablePreview && this.status !== 'error';\n    }\n  }, {\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      var _this3 = this;\n\n      var _a;\n\n      this.backLoad();\n\n      if (this.parentGroup) {\n        this.parentGroup.addImage(this);\n      }\n\n      if (this.directionality) {\n        (_a = this.directionality.change) === null || _a === void 0 ? void 0 : _a.pipe(takeUntil(this.destroy$)).subscribe(function (direction) {\n          _this3.dir = direction;\n\n          _this3.cdr.detectChanges();\n        });\n        this.dir = this.directionality.value;\n      }\n    }\n  }, {\n    key: \"ngOnDestroy\",\n    value: function ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n  }, {\n    key: \"onPreview\",\n    value: function onPreview() {\n      var _this4 = this;\n\n      if (!this.previewable) {\n        return;\n      }\n\n      if (this.parentGroup) {\n        // preview inside image group\n        var previewAbleImages = this.parentGroup.images.filter(function (e) {\n          return e.previewable;\n        });\n        var previewImages = previewAbleImages.map(function (e) {\n          return {\n            src: e.nzSrc\n          };\n        });\n        var previewIndex = previewAbleImages.findIndex(function (el) {\n          return _this4 === el;\n        });\n        var previewRef = this.nzImageService.preview(previewImages, {\n          nzDirection: this.dir\n        });\n        previewRef.switchTo(previewIndex);\n      } else {\n        // preview not inside image group\n        var _previewImages = [{\n          src: this.nzSrc\n        }];\n        this.nzImageService.preview(_previewImages, {\n          nzDirection: this.dir\n        });\n      }\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement() {\n      return this.elementRef;\n    }\n  }, {\n    key: \"ngOnChanges\",\n    value: function ngOnChanges(changes) {\n      var nzSrc = changes.nzSrc;\n\n      if (nzSrc) {\n        this.getElement().nativeElement.src = nzSrc.currentValue;\n        this.backLoad();\n      }\n    }\n    /**\n     * use internal Image object handle fallback & placeholder\n     * @private\n     */\n\n  }, {\n    key: \"backLoad\",\n    value: function backLoad() {\n      var _this5 = this;\n\n      this.backLoadImage = this.document.createElement('img');\n      this.backLoadImage.src = this.nzSrc;\n      this.status = 'loading';\n\n      if (this.backLoadImage.complete) {\n        this.status = 'normal';\n        this.getElement().nativeElement.src = this.nzSrc;\n      } else {\n        if (this.nzPlaceholder) {\n          this.getElement().nativeElement.src = this.nzPlaceholder;\n        } else {\n          this.getElement().nativeElement.src = this.nzSrc;\n        }\n\n        this.backLoadImage.onload = function () {\n          _this5.status = 'normal';\n          _this5.getElement().nativeElement.src = _this5.nzSrc;\n        };\n\n        this.backLoadImage.onerror = function () {\n          _this5.status = 'error';\n\n          if (_this5.nzFallback) {\n            _this5.getElement().nativeElement.src = _this5.nzFallback;\n          }\n        };\n      }\n    }\n  }]);\n\n  return NzImageDirective;\n}();\n\nNzImageDirective.ɵfac = function NzImageDirective_Factory(t) {\n  return new (t || NzImageDirective)(ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NzConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NzImageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NzImageGroupComponent, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc6.Directionality, 8));\n};\n\nNzImageDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: NzImageDirective,\n  selectors: [[\"img\", \"nz-image\", \"\"]],\n  hostBindings: function NzImageDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"click\", function NzImageDirective_click_HostBindingHandler() {\n        return ctx.onPreview();\n      });\n    }\n  },\n  inputs: {\n    nzSrc: \"nzSrc\",\n    nzDisablePreview: \"nzDisablePreview\",\n    nzFallback: \"nzFallback\",\n    nzPlaceholder: \"nzPlaceholder\"\n  },\n  exportAs: [\"nzImage\"],\n  features: [ɵngcc0.ɵɵNgOnChangesFeature]\n});\n\nNzImageDirective.ctorParameters = function () {\n  return [{\n    type: undefined,\n    decorators: [{\n      type: Inject,\n      args: [DOCUMENT]\n    }]\n  }, {\n    type: NzConfigService\n  }, {\n    type: ElementRef\n  }, {\n    type: NzImageService\n  }, {\n    type: ChangeDetectorRef\n  }, {\n    type: NzImageGroupComponent,\n    decorators: [{\n      type: Optional\n    }]\n  }, {\n    type: Directionality,\n    decorators: [{\n      type: Optional\n    }]\n  }];\n};\n\nNzImageDirective.propDecorators = {\n  nzSrc: [{\n    type: Input\n  }],\n  nzDisablePreview: [{\n    type: Input\n  }],\n  nzFallback: [{\n    type: Input\n  }],\n  nzPlaceholder: [{\n    type: Input\n  }]\n};\n\n__decorate([InputBoolean(), WithConfig(), __metadata(\"design:type\", Boolean)], NzImageDirective.prototype, \"nzDisablePreview\", void 0);\n\n__decorate([WithConfig(), __metadata(\"design:type\", Object)], NzImageDirective.prototype, \"nzFallback\", void 0);\n\n__decorate([WithConfig(), __metadata(\"design:type\", Object)], NzImageDirective.prototype, \"nzPlaceholder\", void 0);\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NzImageGroupComponent, [{\n    type: Component,\n    args: [{\n      selector: 'nz-image-group',\n      exportAs: 'nzImageGroup',\n      template: '<ng-content></ng-content>',\n      preserveWhitespaces: false,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      encapsulation: ViewEncapsulation.None\n    }]\n  }], function () {\n    return [];\n  }, null);\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NzImagePreviewComponent, [{\n    type: Component,\n    args: [{\n      selector: 'nz-image-preview',\n      exportAs: 'nzImagePreview',\n      animations: [fadeMotion],\n      template: \"\\n    <div class=\\\"ant-image-preview\\\">\\n      <div tabindex=\\\"0\\\" aria-hidden=\\\"true\\\" style=\\\"width: 0; height: 0; overflow: hidden; outline: none;\\\"></div>\\n      <div class=\\\"ant-image-preview-content\\\">\\n        <div class=\\\"ant-image-preview-body\\\">\\n          <ul class=\\\"ant-image-preview-operations\\\">\\n            <li\\n              class=\\\"ant-image-preview-operations-operation\\\"\\n              [class.ant-image-preview-operations-operation-disabled]=\\\"zoomOutDisabled && option.type === 'zoomOut'\\\"\\n              (click)=\\\"option.onClick()\\\"\\n              *ngFor=\\\"let option of operations\\\"\\n            >\\n              <span class=\\\"ant-image-preview-operations-icon\\\" nz-icon [nzType]=\\\"option.icon\\\" nzTheme=\\\"outline\\\"></span>\\n            </li>\\n          </ul>\\n          <div\\n            class=\\\"ant-image-preview-img-wrapper\\\"\\n            cdkDrag\\n            [style.transform]=\\\"previewImageWrapperTransform\\\"\\n            [cdkDragFreeDragPosition]=\\\"position\\\"\\n            (mousedown)=\\\"onDragStarted()\\\"\\n            (cdkDragReleased)=\\\"onDragReleased()\\\"\\n          >\\n            <ng-container *ngFor=\\\"let image of images; index as imageIndex\\\">\\n              <img\\n                cdkDragHandle\\n                class=\\\"ant-image-preview-img\\\"\\n                #imgRef\\n                *ngIf=\\\"index === imageIndex\\\"\\n                [attr.src]=\\\"image.src\\\"\\n                [attr.alt]=\\\"image.alt\\\"\\n                [style.width]=\\\"image.width\\\"\\n                [style.height]=\\\"image.height\\\"\\n                [style.transform]=\\\"previewImageTransform\\\"\\n              />\\n            </ng-container>\\n          </div>\\n          <ng-container *ngIf=\\\"images.length > 1\\\">\\n            <div\\n              class=\\\"ant-image-preview-switch-left\\\"\\n              [class.ant-image-preview-switch-left-disabled]=\\\"index <= 0\\\"\\n              (click)=\\\"onSwitchLeft($event)\\\"\\n            >\\n              <span nz-icon nzType=\\\"left\\\" nzTheme=\\\"outline\\\"></span>\\n            </div>\\n            <div\\n              class=\\\"ant-image-preview-switch-right\\\"\\n              [class.ant-image-preview-switch-right-disabled]=\\\"index >= images.length - 1\\\"\\n              (click)=\\\"onSwitchRight($event)\\\"\\n            >\\n              <span nz-icon nzType=\\\"right\\\" nzTheme=\\\"outline\\\"></span>\\n            </div>\\n          </ng-container>\\n        </div>\\n      </div>\\n      <div tabindex=\\\"0\\\" aria-hidden=\\\"true\\\" style=\\\"width: 0; height: 0; overflow: hidden; outline: none;\\\"></div>\\n    </div>\\n  \",\n      preserveWhitespaces: false,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      encapsulation: ViewEncapsulation.None,\n      host: {\n        '[class.ant-image-preview-moving]': 'isDragging',\n        '[style.zIndex]': 'config.nzZIndex',\n        '[class.ant-image-preview-wrap]': 'true',\n        '[@.disabled]': 'config.nzNoAnimation',\n        '[@fadeMotion]': 'animationState',\n        '(@fadeMotion.start)': 'onAnimationStart($event)',\n        '(@fadeMotion.done)': 'onAnimationDone($event)',\n        '(click)': 'onContainerClick($event)',\n        tabindex: '-1',\n        role: 'document'\n      }\n    }]\n  }], function () {\n    return [{\n      type: ɵngcc0.ChangeDetectorRef\n    }, {\n      type: ɵngcc1.NzConfigService\n    }, {\n      type: NzImagePreviewOptions\n    }, {\n      type: ɵngcc2.OverlayRef\n    }];\n  }, {\n    imageRef: [{\n      type: ViewChild,\n      args: ['imgRef']\n    }]\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NzImageService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: ɵngcc2.Overlay\n    }, {\n      type: ɵngcc0.Injector\n    }, {\n      type: ɵngcc1.NzConfigService\n    }, {\n      type: ɵngcc6.Directionality,\n      decorators: [{\n        type: Optional\n      }]\n    }];\n  }, null);\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NzImageDirective, [{\n    type: Directive,\n    args: [{\n      selector: 'img[nz-image]',\n      exportAs: 'nzImage',\n      host: {\n        '(click)': 'onPreview()'\n      }\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }, {\n      type: ɵngcc1.NzConfigService\n    }, {\n      type: ɵngcc0.ElementRef\n    }, {\n      type: NzImageService\n    }, {\n      type: ɵngcc0.ChangeDetectorRef\n    }, {\n      type: NzImageGroupComponent,\n      decorators: [{\n        type: Optional\n      }]\n    }, {\n      type: ɵngcc6.Directionality,\n      decorators: [{\n        type: Optional\n      }]\n    }];\n  }, {\n    nzSrc: [{\n      type: Input\n    }],\n    nzDisablePreview: [{\n      type: Input\n    }],\n    nzFallback: [{\n      type: Input\n    }],\n    nzPlaceholder: [{\n      type: Input\n    }]\n  });\n})();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nvar NzImageModule = function NzImageModule() {\n  _classCallCheck(this, NzImageModule);\n};\n\nNzImageModule.ɵfac = function NzImageModule_Factory(t) {\n  return new (t || NzImageModule)();\n};\n\nNzImageModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n  type: NzImageModule\n});\nNzImageModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n  providers: [NzImageService],\n  imports: [[BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, NzIconModule, NzPipesModule]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NzImageModule, [{\n    type: NgModule,\n    args: [{\n      imports: [BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, NzIconModule, NzPipesModule],\n      exports: [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent],\n      providers: [NzImageService],\n      entryComponents: [NzImagePreviewComponent],\n      declarations: [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent]\n    }]\n  }], null, null);\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NzImageModule, {\n    declarations: function declarations() {\n      return [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent];\n    },\n    imports: function imports() {\n      return [BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, NzIconModule, NzPipesModule];\n    },\n    exports: function exports() {\n      return [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent];\n    }\n  });\n})();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { FADE_CLASS_NAME_MAP, IMAGE_PREVIEW_MASK_CLASS_NAME, NZ_CONFIG_MODULE_NAME, NzImageDirective, NzImageGroupComponent, NzImageModule, NzImagePreviewComponent, NzImagePreviewOptions, NzImagePreviewRef, NzImageService, getClientSize, getFitContentPosition, getOffset }; //# sourceMappingURL=ng-zorro-antd-image.js.map","map":{"version":3,"sources":["/Users/mac/WebstormProjects/github-page/node_modules/ng-zorro-antd/__ivy_ngcc__/fesm2015/ng-zorro-antd-image.js"],"names":["__decorate","__metadata","Directionality","BidiModule","DOCUMENT","CommonModule","Component","ChangeDetectionStrategy","ViewEncapsulation","EventEmitter","ChangeDetectorRef","ViewChild","Injector","Injectable","Optional","Directive","Inject","ElementRef","Input","NgModule","NzConfigService","WithConfig","isNotNil","InputBoolean","Subject","filter","take","takeUntil","OverlayRef","OverlayConfig","Overlay","OverlayModule","ComponentPortal","PortalModule","ESCAPE","hasModifierKey","fadeMotion","DragDropModule","NzIconModule","NzPipesModule","ɵngcc0","ɵngcc1","ɵngcc2","ɵngcc3","ɵngcc4","ɵngcc5","ɵngcc6","_c0","_c1","NzImagePreviewComponent_li_5_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","NzImagePreviewComponent_li_5_Template_li_click_0_listener","option_r3","$implicit","onClick","ɵɵelement","ɵɵelementEnd","ctx_r0","ɵɵnextContext","ɵɵclassProp","zoomOutDisabled","type","ɵɵadvance","ɵɵproperty","icon","NzImagePreviewComponent_ng_container_7_img_1_Template","image_r5","ctx_r7","ɵɵstyleProp","width","height","previewImageTransform","ɵɵattribute","src","ɵɵsanitizeUrl","alt","NzImagePreviewComponent_ng_container_7_Template","ɵɵelementContainerStart","ɵɵtemplate","ɵɵelementContainerEnd","imageIndex_r6","index","ctx_r1","NzImagePreviewComponent_ng_container_8_Template","_r11","ɵɵgetCurrentView","NzImagePreviewComponent_ng_container_8_Template_div_click_1_listener","$event","ɵɵrestoreView","ctx_r10","onSwitchLeft","NzImagePreviewComponent_ng_container_8_Template_div_click_3_listener","ctx_r12","onSwitchRight","ctx_r2","images","length","NzImageGroupComponent","image","push","ɵfac","NzImageGroupComponent_Factory","t","ɵcmp","ɵɵdefineComponent","selectors","exportAs","ngContentSelectors","decls","vars","template","NzImageGroupComponent_Template","ɵɵprojectionDef","ɵɵprojection","encapsulation","changeDetection","FADE_CLASS_NAME_MAP","enter","enterActive","leave","leaveActive","IMAGE_PREVIEW_MASK_CLASS_NAME","NZ_CONFIG_MODULE_NAME","NzImagePreviewOptions","nzKeyboard","nzNoAnimation","nzMaskClosable","nzCloseOnNavigation","NzImagePreviewRef","previewInstance","config","overlayRef","keydownEvents","pipe","event","keyCode","subscribe","preventDefault","close","detachments","dispose","containerClick","closeClick","animationStateChanged","phaseName","toState","switchTo","next","prev","startLeaveAnimation","getFitContentPosition","params","fixPos","clientWidth","clientHeight","x","y","fitPoint","left","top","getOffset","node","box","getBoundingClientRect","docElem","document","documentElement","window","pageXOffset","scrollLeft","clientLeft","body","pageYOffset","scrollTop","clientTop","getClientSize","innerHeight","start","size","clientSize","startAddSize","offsetStart","distance","initialPosition","NzImagePreviewComponent","cdr","nzConfigService","_a","_b","isDragging","visible","animationState","previewImageWrapperTransform","operations","onClose","onZoomIn","onZoomOut","onRotateRight","onRotateLeft","position","Object","assign","destroy$","zoom","nzZoom","rotate","nzRotate","updateZoomOutDisabled","updatePreviewImageTransform","updatePreviewImageWrapperTransform","defaultConfig","getConfigForComponent","markForCheck","reset","emit","stopPropagation","e","target","currentTarget","maskClosable","setEnterAnimationClass","setLeaveAnimationClass","imageRef","nativeElement","offsetWidth","offsetHeight","isRotate","fitContentParams","fitContentPos","complete","animationDisabled","backdropElement","classList","add","NzImagePreviewComponent_Factory","ɵɵdirectiveInject","viewQuery","NzImagePreviewComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","hostAttrs","hostVars","hostBindings","NzImagePreviewComponent_HostBindings","ɵɵsyntheticHostListener","NzImagePreviewComponent_animation_fadeMotion_start_HostBindingHandler","onAnimationStart","NzImagePreviewComponent_animation_fadeMotion_done_HostBindingHandler","onAnimationDone","NzImagePreviewComponent_click_HostBindingHandler","onContainerClick","ɵɵsyntheticHostProperty","nzZIndex","consts","NzImagePreviewComponent_Template","NzImagePreviewComponent_Template_div_mousedown_6_listener","onDragStarted","NzImagePreviewComponent_Template_div_cdkDragReleased_6_listener","onDragReleased","directives","NgForOf","CdkDrag","NgIf","NzIconDirective","CdkDragHandle","data","animation","ctorParameters","propDecorators","args","NzImageService","overlay","injector","directionality","options","display","configMerged","createOverlay","previewComponent","attachPreviewComponent","setImages","previewRef","create","parent","providers","provide","useValue","containerPortal","containerRef","attach","instance","globalConfig","overLayConfig","hasBackdrop","scrollStrategy","scrollStrategies","block","positionStrategy","global","disposeOnNavigation","backdropClass","direction","nzDirection","value","NzImageService_Factory","ɵɵinject","ɵprov","ɵɵdefineInjectable","token","factory","decorators","NZ_CONFIG_MODULE_NAME$1","NzImageDirective","elementRef","nzImageService","parentGroup","_nzModuleName","nzSrc","nzDisablePreview","nzFallback","nzPlaceholder","status","backLoad","addImage","change","dir","detectChanges","previewable","previewAbleImages","previewImages","map","previewIndex","findIndex","el","preview","changes","getElement","currentValue","backLoadImage","createElement","onload","onerror","NzImageDirective_Factory","ɵdir","ɵɵdefineDirective","NzImageDirective_HostBindings","NzImageDirective_click_HostBindingHandler","onPreview","inputs","features","ɵɵNgOnChangesFeature","undefined","Boolean","prototype","ngDevMode","ɵsetClassMetadata","selector","preserveWhitespaces","OnPush","None","animations","host","tabindex","role","NzImageModule","NzImageModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","imports","exports","entryComponents","declarations","ngJitMode","ɵɵsetNgModuleScope"],"mappings":";;AAAA,SAASA,UAAT,EAAqBC,UAArB,QAAuC,OAAvC;AACA,SAASC,cAAT,EAAyBC,UAAzB,QAA2C,mBAA3C;AACA,SAASC,QAAT,EAAmBC,YAAnB,QAAuC,iBAAvC;AACA,SAASC,SAAT,EAAoBC,uBAApB,EAA6CC,iBAA7C,EAAgEC,YAAhE,EAA8EC,iBAA9E,EAAiGC,SAAjG,EAA4GC,QAA5G,EAAsHC,UAAtH,EAAkIC,QAAlI,EAA4IC,SAA5I,EAAuJC,MAAvJ,EAA+JC,UAA/J,EAA2KC,KAA3K,EAAkLC,QAAlL,QAAkM,eAAlM;AACA,SAASC,eAAT,EAA0BC,UAA1B,QAA4C,2BAA5C;AACA,SAASC,QAAT,EAAmBC,YAAnB,QAAuC,yBAAvC;AACA,SAASC,OAAT,QAAwB,MAAxB;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,SAAvB,QAAwC,gBAAxC;AACA,SAASC,UAAT,EAAqBC,aAArB,EAAoCC,OAApC,EAA6CC,aAA7C,QAAkE,sBAAlE;AACA,SAASC,eAAT,EAA0BC,YAA1B,QAA8C,qBAA9C;AACA,SAASC,MAAT,EAAiBC,cAAjB,QAAuC,uBAAvC;AACA,SAASC,UAAT,QAA2B,8BAA3B;AACA,SAASC,cAAT,QAA+B,wBAA/B;AACA,SAASC,YAAT,QAA6B,oBAA7B;AACA,SAASC,aAAT,QAA8B,qBAA9B;AAEA;AACA;AACA;AACA;;AACA,OAAO,KAAKC,MAAZ,MAAwB,eAAxB;AACA,OAAO,KAAKC,MAAZ,MAAwB,2BAAxB;AACA,OAAO,KAAKC,MAAZ,MAAwB,sBAAxB;AACA,OAAO,KAAKC,MAAZ,MAAwB,iBAAxB;AACA,OAAO,KAAKC,MAAZ,MAAwB,wBAAxB;AACA,OAAO,KAAKC,MAAZ,MAAwB,oBAAxB;AACA,OAAO,KAAKC,MAAZ,MAAwB,mBAAxB;AAEA,IAAMC,GAAG,GAAG,CAAC,GAAD,CAAZ;AACA,IAAMC,GAAG,GAAG,CAAC,QAAD,CAAZ;;AACA,SAASC,qCAAT,CAA+CC,EAA/C,EAAmDC,GAAnD,EAAwD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAClEV,IAAAA,MAAM,CAACY,cAAP,CAAsB,CAAtB,EAAyB,IAAzB,EAA+B,CAA/B;AACAZ,IAAAA,MAAM,CAACa,UAAP,CAAkB,OAAlB,EAA2B,SAASC,yDAAT,GAAqE;AAAE,UAAMC,SAAS,GAAGJ,GAAG,CAACK,SAAtB;AAAiC,aAAOD,SAAS,CAACE,OAAV,EAAP;AAA6B,KAAhK;AACAjB,IAAAA,MAAM,CAACkB,SAAP,CAAiB,CAAjB,EAAoB,MAApB,EAA4B,EAA5B;AACAlB,IAAAA,MAAM,CAACmB,YAAP;AACH;;AAAC,MAAIT,EAAE,GAAG,CAAT,EAAY;AACV,QAAMK,SAAS,GAAGJ,GAAG,CAACK,SAAtB;AACA,QAAMI,MAAM,GAAGpB,MAAM,CAACqB,aAAP,EAAf;AACArB,IAAAA,MAAM,CAACsB,WAAP,CAAmB,iDAAnB,EAAsEF,MAAM,CAACG,eAAP,IAA0BR,SAAS,CAACS,IAAV,KAAmB,SAAnH;AACAxB,IAAAA,MAAM,CAACyB,SAAP,CAAiB,CAAjB;AACAzB,IAAAA,MAAM,CAAC0B,UAAP,CAAkB,QAAlB,EAA4BX,SAAS,CAACY,IAAtC;AACH;AAAE;;AACH,SAASC,qDAAT,CAA+DlB,EAA/D,EAAmEC,GAAnE,EAAwE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAClFV,IAAAA,MAAM,CAACkB,SAAP,CAAiB,CAAjB,EAAoB,KAApB,EAA2B,EAA3B,EAA+B,EAA/B;AACH;;AAAC,MAAIR,EAAE,GAAG,CAAT,EAAY;AACV,QAAMmB,QAAQ,GAAG7B,MAAM,CAACqB,aAAP,GAAuBL,SAAxC;AACA,QAAMc,MAAM,GAAG9B,MAAM,CAACqB,aAAP,EAAf;AACArB,IAAAA,MAAM,CAAC+B,WAAP,CAAmB,OAAnB,EAA4BF,QAAQ,CAACG,KAArC,EAA4C,QAA5C,EAAsDH,QAAQ,CAACI,MAA/D,EAAuE,WAAvE,EAAoFH,MAAM,CAACI,qBAA3F;AACAlC,IAAAA,MAAM,CAACmC,WAAP,CAAmB,KAAnB,EAA0BN,QAAQ,CAACO,GAAnC,EAAwCpC,MAAM,CAACqC,aAA/C,EAA8D,KAA9D,EAAqER,QAAQ,CAACS,GAA9E;AACH;AAAE;;AACH,SAASC,+CAAT,CAAyD7B,EAAzD,EAA6DC,GAA7D,EAAkE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC5EV,IAAAA,MAAM,CAACwC,uBAAP,CAA+B,CAA/B;AACAxC,IAAAA,MAAM,CAACyC,UAAP,CAAkB,CAAlB,EAAqBb,qDAArB,EAA4E,CAA5E,EAA+E,CAA/E,EAAkF,KAAlF,EAAyF,EAAzF;AACA5B,IAAAA,MAAM,CAAC0C,qBAAP;AACH;;AAAC,MAAIhC,EAAE,GAAG,CAAT,EAAY;AACV,QAAMiC,aAAa,GAAGhC,GAAG,CAACiC,KAA1B;AACA,QAAMC,MAAM,GAAG7C,MAAM,CAACqB,aAAP,EAAf;AACArB,IAAAA,MAAM,CAACyB,SAAP,CAAiB,CAAjB;AACAzB,IAAAA,MAAM,CAAC0B,UAAP,CAAkB,MAAlB,EAA0BmB,MAAM,CAACD,KAAP,KAAiBD,aAA3C;AACH;AAAE;;AACH,SAASG,+CAAT,CAAyDpC,EAAzD,EAA6DC,GAA7D,EAAkE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC5E,QAAMqC,IAAI,GAAG/C,MAAM,CAACgD,gBAAP,EAAb;;AACAhD,IAAAA,MAAM,CAACwC,uBAAP,CAA+B,CAA/B;AACAxC,IAAAA,MAAM,CAACY,cAAP,CAAsB,CAAtB,EAAyB,KAAzB,EAAgC,EAAhC;AACAZ,IAAAA,MAAM,CAACa,UAAP,CAAkB,OAAlB,EAA2B,SAASoC,oEAAT,CAA8EC,MAA9E,EAAsF;AAAElD,MAAAA,MAAM,CAACmD,aAAP,CAAqBJ,IAArB;AAA4B,UAAMK,OAAO,GAAGpD,MAAM,CAACqB,aAAP,EAAhB;AAAwC,aAAO+B,OAAO,CAACC,YAAR,CAAqBH,MAArB,CAAP;AAAsC,KAA7N;AACAlD,IAAAA,MAAM,CAACkB,SAAP,CAAiB,CAAjB,EAAoB,MAApB,EAA4B,EAA5B;AACAlB,IAAAA,MAAM,CAACmB,YAAP;AACAnB,IAAAA,MAAM,CAACY,cAAP,CAAsB,CAAtB,EAAyB,KAAzB,EAAgC,EAAhC;AACAZ,IAAAA,MAAM,CAACa,UAAP,CAAkB,OAAlB,EAA2B,SAASyC,oEAAT,CAA8EJ,MAA9E,EAAsF;AAAElD,MAAAA,MAAM,CAACmD,aAAP,CAAqBJ,IAArB;AAA4B,UAAMQ,OAAO,GAAGvD,MAAM,CAACqB,aAAP,EAAhB;AAAwC,aAAOkC,OAAO,CAACC,aAAR,CAAsBN,MAAtB,CAAP;AAAuC,KAA9N;AACAlD,IAAAA,MAAM,CAACkB,SAAP,CAAiB,CAAjB,EAAoB,MAApB,EAA4B,EAA5B;AACAlB,IAAAA,MAAM,CAACmB,YAAP;AACAnB,IAAAA,MAAM,CAAC0C,qBAAP;AACH;;AAAC,MAAIhC,EAAE,GAAG,CAAT,EAAY;AACV,QAAM+C,MAAM,GAAGzD,MAAM,CAACqB,aAAP,EAAf;AACArB,IAAAA,MAAM,CAACyB,SAAP,CAAiB,CAAjB;AACAzB,IAAAA,MAAM,CAACsB,WAAP,CAAmB,wCAAnB,EAA6DmC,MAAM,CAACb,KAAP,IAAgB,CAA7E;AACA5C,IAAAA,MAAM,CAACyB,SAAP,CAAiB,CAAjB;AACAzB,IAAAA,MAAM,CAACsB,WAAP,CAAmB,yCAAnB,EAA8DmC,MAAM,CAACb,KAAP,IAAgBa,MAAM,CAACC,MAAP,CAAcC,MAAd,GAAuB,CAArG;AACH;AAAE;;IACGC,qB;AACF,mCAAc;AAAA;;AACV,SAAKF,MAAL,GAAc,EAAd;AACH;;;;WACD,kBAASG,KAAT,EAAgB;AACZ,WAAKH,MAAL,CAAYI,IAAZ,CAAiBD,KAAjB;AACH;;;;;;AAELD,qBAAqB,CAACG,IAAtB,GAA6B,SAASC,6BAAT,CAAuCC,CAAvC,EAA0C;AAAE,SAAO,KAAKA,CAAC,IAAIL,qBAAV,GAAP;AAA4C,CAArH;;AACAA,qBAAqB,CAACM,IAAtB,GAA6B,aAAclE,MAAM,CAACmE,iBAAP,CAAyB;AAAE3C,EAAAA,IAAI,EAAEoC,qBAAR;AAA+BQ,EAAAA,SAAS,EAAE,CAAC,CAAC,gBAAD,CAAD,CAA1C;AAAgEC,EAAAA,QAAQ,EAAE,CAAC,cAAD,CAA1E;AAA4FC,EAAAA,kBAAkB,EAAE/D,GAAhH;AAAqHgE,EAAAA,KAAK,EAAE,CAA5H;AAA+HC,EAAAA,IAAI,EAAE,CAArI;AAAwIC,EAAAA,QAAQ,EAAE,SAASC,8BAAT,CAAwChE,EAAxC,EAA4CC,GAA5C,EAAiD;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AAC7QV,MAAAA,MAAM,CAAC2E,eAAP;AACA3E,MAAAA,MAAM,CAAC4E,YAAP,CAAoB,CAApB;AACH;AAAE,GAH6D;AAG3DC,EAAAA,aAAa,EAAE,CAH4C;AAGzCC,EAAAA,eAAe,EAAE;AAHwB,CAAzB,CAA3C;AAKA,IAAMC,mBAAmB,GAAG;AACxBC,EAAAA,KAAK,EAAE,gBADiB;AAExBC,EAAAA,WAAW,EAAE,uBAFW;AAGxBC,EAAAA,KAAK,EAAE,gBAHiB;AAIxBC,EAAAA,WAAW,EAAE;AAJW,CAA5B;AAMA,IAAMC,6BAA6B,GAAG,wBAAtC;AACA,IAAMC,qBAAqB,GAAG,OAA9B;;IAEMC,qB,GACF,iCAAc;AAAA;;AACV,OAAKC,UAAL,GAAkB,IAAlB;AACA,OAAKC,aAAL,GAAqB,KAArB;AACA,OAAKC,cAAL,GAAsB,IAAtB;AACA,OAAKC,mBAAL,GAA2B,IAA3B;AACH,C;AAGL;AACA;AACA;AACA;;;IACMC,iB;AACF,6BAAYC,eAAZ,EAA6BC,MAA7B,EAAqCC,UAArC,EAAiD;AAAA;;AAAA;;AAC7C,SAAKF,eAAL,GAAuBA,eAAvB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AACAA,IAAAA,UAAU,CACLC,aADL,GAEKC,IAFL,CAEU/G,MAAM,CAAC,UAAAgH,KAAK,EAAI;AACtB,aAAO,KAAI,CAACJ,MAAL,CAAYN,UAAZ,IAA0BU,KAAK,CAACC,OAAN,KAAkBxG,MAA5C,IAAsD,CAACC,cAAc,CAACsG,KAAD,CAA5E;AACH,KAFe,CAFhB,EAKKE,SALL,CAKe,UAAAF,KAAK,EAAI;AACpBA,MAAAA,KAAK,CAACG,cAAN;;AACA,MAAA,KAAI,CAACC,KAAL;AACH,KARD;AASAP,IAAAA,UAAU,CAACQ,WAAX,GAAyBH,SAAzB,CAAmC,YAAM;AACrC,MAAA,KAAI,CAACL,UAAL,CAAgBS,OAAhB;AACH,KAFD;AAGAX,IAAAA,eAAe,CAACY,cAAhB,CAA+BR,IAA/B,CAAoC9G,IAAI,CAAC,CAAD,CAAxC,EAA6CiH,SAA7C,CAAuD,YAAM;AACzD,MAAA,KAAI,CAACE,KAAL;AACH,KAFD;AAGAT,IAAAA,eAAe,CAACa,UAAhB,CAA2BT,IAA3B,CAAgC9G,IAAI,CAAC,CAAD,CAApC,EAAyCiH,SAAzC,CAAmD,YAAM;AACrD,MAAA,KAAI,CAACE,KAAL;AACH,KAFD;AAGAT,IAAAA,eAAe,CAACc,qBAAhB,CACKV,IADL,CACU/G,MAAM,CAAC,UAAAgH,KAAK;AAAA,aAAIA,KAAK,CAACU,SAAN,KAAoB,MAApB,IAA8BV,KAAK,CAACW,OAAN,KAAkB,OAApD;AAAA,KAAN,CADhB,EACoF1H,IAAI,CAAC,CAAD,CADxF,EAEKiH,SAFL,CAEe,YAAM;AACjB,MAAA,KAAI,CAACI,OAAL;AACH,KAJD;AAKH;;;;WACD,kBAAS3D,KAAT,EAAgB;AACZ,WAAKgD,eAAL,CAAqBiB,QAArB,CAA8BjE,KAA9B;AACH;;;WACD,gBAAO;AACH,WAAKgD,eAAL,CAAqBkB,IAArB;AACH;;;WACD,gBAAO;AACH,WAAKlB,eAAL,CAAqBmB,IAArB;AACH;;;WACD,iBAAQ;AACJ,WAAKnB,eAAL,CAAqBoB,mBAArB;AACH;;;WACD,mBAAU;AACN,WAAKlB,UAAL,CAAgBS,OAAhB;AACH;;;;;AAGL;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASU,qBAAT,CAA+BC,MAA/B,EAAuC;AACnC,MAAIC,MAAM,GAAG,EAAb;;AACA,MAAID,MAAM,CAAClF,KAAP,IAAgBkF,MAAM,CAACE,WAAvB,IAAsCF,MAAM,CAACjF,MAAP,IAAiBiF,MAAM,CAACG,YAAlE,EAAgF;AAC5EF,IAAAA,MAAM,GAAG;AACLG,MAAAA,CAAC,EAAE,CADE;AAELC,MAAAA,CAAC,EAAE;AAFE,KAAT;AAIH;;AACD,MAAIL,MAAM,CAAClF,KAAP,GAAekF,MAAM,CAACE,WAAtB,IAAqCF,MAAM,CAACjF,MAAP,GAAgBiF,MAAM,CAACG,YAAhE,EAA8E;AAC1EF,IAAAA,MAAM,GAAG;AACLG,MAAAA,CAAC,EAAEE,QAAQ,CAACN,MAAM,CAACO,IAAR,EAAcP,MAAM,CAAClF,KAArB,EAA4BkF,MAAM,CAACE,WAAnC,CADN;AAELG,MAAAA,CAAC,EAAEC,QAAQ,CAACN,MAAM,CAACQ,GAAR,EAAaR,MAAM,CAACjF,MAApB,EAA4BiF,MAAM,CAACG,YAAnC;AAFN,KAAT;AAIH;;AACD,SAAOF,MAAP;AACH;;AACD,SAASQ,SAAT,CAAmBC,IAAnB,EAAyB;AACrB,MAAMC,GAAG,GAAGD,IAAI,CAACE,qBAAL,EAAZ;AACA,MAAMC,OAAO,GAAGC,QAAQ,CAACC,eAAzB,CAFqB,CAGrB;;AACA,SAAO;AACHR,IAAAA,IAAI,EAAEI,GAAG,CAACJ,IAAJ,IAAYS,MAAM,CAACC,WAAP,IAAsBJ,OAAO,CAACK,UAA1C,KAAyDL,OAAO,CAACM,UAAR,IAAsBL,QAAQ,CAACM,IAAT,CAAcD,UAApC,IAAkD,CAA3G,CADH;AAEHX,IAAAA,GAAG,EAAEG,GAAG,CAACH,GAAJ,IAAWQ,MAAM,CAACK,WAAP,IAAsBR,OAAO,CAACS,SAAzC,KAAuDT,OAAO,CAACU,SAAR,IAAqBT,QAAQ,CAACM,IAAT,CAAcG,SAAnC,IAAgD,CAAvG;AAFF,GAAP;AAIH;;AACD,SAASC,aAAT,GAAyB;AACrB,MAAM1G,KAAK,GAAGgG,QAAQ,CAACC,eAAT,CAAyBb,WAAvC;AACA,MAAMnF,MAAM,GAAGiG,MAAM,CAACS,WAAP,IAAsBX,QAAQ,CAACC,eAAT,CAAyBZ,YAA9D;AACA,SAAO;AACHrF,IAAAA,KAAK,EAALA,KADG;AAEHC,IAAAA,MAAM,EAANA;AAFG,GAAP;AAIH;;AACD,SAASuF,QAAT,CAAkBoB,KAAlB,EAAyBC,IAAzB,EAA+BC,UAA/B,EAA2C;AACvC,MAAMC,YAAY,GAAGH,KAAK,GAAGC,IAA7B;AACA,MAAMG,WAAW,GAAG,CAACH,IAAI,GAAGC,UAAR,IAAsB,CAA1C;AACA,MAAIG,QAAQ,GAAG,IAAf;;AACA,MAAIJ,IAAI,GAAGC,UAAX,EAAuB;AACnB,QAAIF,KAAK,GAAG,CAAZ,EAAe;AACXK,MAAAA,QAAQ,GAAGD,WAAX;AACH;;AACD,QAAIJ,KAAK,GAAG,CAAR,IAAaG,YAAY,GAAGD,UAAhC,EAA4C;AACxCG,MAAAA,QAAQ,GAAG,CAACD,WAAZ;AACH;AACJ,GAPD,MAQK;AACD,QAAIJ,KAAK,GAAG,CAAR,IAAaG,YAAY,GAAGD,UAAhC,EAA4C;AACxCG,MAAAA,QAAQ,GAAGL,KAAK,GAAG,CAAR,GAAYI,WAAZ,GAA0B,CAACA,WAAtC;AACH;AACJ;;AACD,SAAOC,QAAP;AACH;;AAED,IAAMC,eAAe,GAAG;AACpB5B,EAAAA,CAAC,EAAE,CADiB;AAEpBC,EAAAA,CAAC,EAAE;AAFiB,CAAxB;;IAIM4B,uB;AACF,mCAAYC,GAAZ,EAAiBC,eAAjB,EAAkCxD,MAAlC,EAA0CC,UAA1C,EAAsD;AAAA;;AAAA;;AAClD,QAAIwD,EAAJ,EAAQC,EAAR;;AACA,SAAKH,GAAL,GAAWA,GAAX;AACA,SAAKC,eAAL,GAAuBA,eAAvB;AACA,SAAKxD,MAAL,GAAcA,MAAd;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AACA,SAAKpC,MAAL,GAAc,EAAd;AACA,SAAKd,KAAL,GAAa,CAAb;AACA,SAAK4G,UAAL,GAAkB,KAAlB;AACA,SAAKC,OAAL,GAAe,IAAf;AACA,SAAKC,cAAL,GAAsB,OAAtB;AACA,SAAKhD,qBAAL,GAA6B,IAAIzI,YAAJ,EAA7B;AACA,SAAKiE,qBAAL,GAA6B,EAA7B;AACA,SAAKyH,4BAAL,GAAoC,EAApC;AACA,SAAKC,UAAL,GAAkB,CACd;AACIjI,MAAAA,IAAI,EAAE,OADV;AAEIV,MAAAA,OAAO,EAAE,mBAAM;AACX,QAAA,MAAI,CAAC4I,OAAL;AACH,OAJL;AAKIrI,MAAAA,IAAI,EAAE;AALV,KADc,EAQd;AACIG,MAAAA,IAAI,EAAE,SADV;AAEIV,MAAAA,OAAO,EAAE,mBAAM;AACX,QAAA,MAAI,CAAC6I,QAAL;AACH,OAJL;AAKItI,MAAAA,IAAI,EAAE;AALV,KARc,EAed;AACIG,MAAAA,IAAI,EAAE,UADV;AAEIV,MAAAA,OAAO,EAAE,mBAAM;AACX,QAAA,MAAI,CAAC8I,SAAL;AACH,OAJL;AAKIvI,MAAAA,IAAI,EAAE;AALV,KAfc,EAsBd;AACIG,MAAAA,IAAI,EAAE,cADV;AAEIV,MAAAA,OAAO,EAAE,mBAAM;AACX,QAAA,MAAI,CAAC+I,aAAL;AACH,OAJL;AAKIxI,MAAAA,IAAI,EAAE;AALV,KAtBc,EA6Bd;AACIG,MAAAA,IAAI,EAAE,aADV;AAEIV,MAAAA,OAAO,EAAE,mBAAM;AACX,QAAA,MAAI,CAACgJ,YAAL;AACH,OAJL;AAKIzI,MAAAA,IAAI,EAAE;AALV,KA7Bc,CAAlB;AAqCA,SAAKD,eAAL,GAAuB,KAAvB;AACA,SAAK2I,QAAL,GAAgBC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBlB,eAAlB,CAAhB;AACA,SAAK1C,cAAL,GAAsB,IAAIvI,YAAJ,EAAtB;AACA,SAAKwI,UAAL,GAAkB,IAAIxI,YAAJ,EAAlB;AACA,SAAKoM,QAAL,GAAgB,IAAIrL,OAAJ,EAAhB,CAvDkD,CAwDlD;;AACA,SAAKsL,IAAL,GAAY,CAAChB,EAAE,GAAG,KAAKzD,MAAL,CAAY0E,MAAlB,MAA8B,IAA9B,IAAsCjB,EAAE,KAAK,KAAK,CAAlD,GAAsDA,EAAtD,GAA2D,CAAvE;AACA,SAAKkB,MAAL,GAAc,CAACjB,EAAE,GAAG,KAAK1D,MAAL,CAAY4E,QAAlB,MAAgC,IAAhC,IAAwClB,EAAE,KAAK,KAAK,CAApD,GAAwDA,EAAxD,GAA6D,CAA3E;AACA,SAAKmB,qBAAL;AACA,SAAKC,2BAAL;AACA,SAAKC,kCAAL;AACH;;;;SACD,eAAwB;AACpB,UAAItB,EAAJ;;AACA,aAAO,CAACA,EAAE,GAAG,KAAKzD,MAAL,CAAYL,aAAlB,MAAqC,IAArC,IAA6C8D,EAAE,KAAK,KAAK,CAAzD,GAA6DA,EAA7D,GAAkE,KAAzE;AACH;;;SACD,eAAmB;AACf,UAAIA,EAAJ,EAAQC,EAAR;;AACA,UAAMsB,aAAa,GAAG,KAAKxB,eAAL,CAAqByB,qBAArB,CAA2CzF,qBAA3C,KAAqE,EAA3F;AACA,aAAO,CAACkE,EAAE,GAAG,CAACD,EAAE,GAAG,KAAKzD,MAAL,CAAYJ,cAAlB,MAAsC,IAAtC,IAA8C6D,EAAE,KAAK,KAAK,CAA1D,GAA8DA,EAA9D,GAAmEuB,aAAa,CAACpF,cAAvF,MAA2G,IAA3G,IAAmH8D,EAAE,KAAK,KAAK,CAA/H,GAAmIA,EAAnI,GAAwI,IAA/I;AACH;;;WACD,mBAAU7F,MAAV,EAAkB;AACd,WAAKA,MAAL,GAAcA,MAAd;AACA,WAAK0F,GAAL,CAAS2B,YAAT;AACH;;;WACD,kBAASnI,KAAT,EAAgB;AACZ,WAAKA,KAAL,GAAaA,KAAb;AACA,WAAKwG,GAAL,CAAS2B,YAAT;AACH;;;WACD,gBAAO;AACH,UAAI,KAAKnI,KAAL,GAAa,KAAKc,MAAL,CAAYC,MAAZ,GAAqB,CAAtC,EAAyC;AACrC,aAAKqH,KAAL;AACA,aAAKpI,KAAL;AACA,aAAK+H,2BAAL;AACA,aAAKC,kCAAL;AACA,aAAKF,qBAAL;AACA,aAAKtB,GAAL,CAAS2B,YAAT;AACH;AACJ;;;WACD,gBAAO;AACH,UAAI,KAAKnI,KAAL,GAAa,CAAjB,EAAoB;AAChB,aAAKoI,KAAL;AACA,aAAKpI,KAAL;AACA,aAAK+H,2BAAL;AACA,aAAKC,kCAAL;AACA,aAAKF,qBAAL;AACA,aAAKtB,GAAL,CAAS2B,YAAT;AACH;AACJ;;;WACD,wBAAe;AACX,WAAK3B,GAAL,CAAS2B,YAAT;AACH;;;WACD,mBAAU;AACN,WAAKtE,UAAL,CAAgBwE,IAAhB;AACH;;;WACD,oBAAW;AACP,WAAKX,IAAL,IAAa,CAAb;AACA,WAAKK,2BAAL;AACA,WAAKD,qBAAL;AACA,WAAKR,QAAL,GAAgBC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBlB,eAAlB,CAAhB;AACH;;;WACD,qBAAY;AACR,UAAI,KAAKoB,IAAL,GAAY,CAAhB,EAAmB;AACf,aAAKA,IAAL,IAAa,CAAb;AACA,aAAKK,2BAAL;AACA,aAAKD,qBAAL;AACA,aAAKR,QAAL,GAAgBC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBlB,eAAlB,CAAhB;AACH;AACJ;;;WACD,yBAAgB;AACZ,WAAKsB,MAAL,IAAe,EAAf;AACA,WAAKG,2BAAL;AACH;;;WACD,wBAAe;AACX,WAAKH,MAAL,IAAe,EAAf;AACA,WAAKG,2BAAL;AACH;;;WACD,sBAAa1E,KAAb,EAAoB;AAChBA,MAAAA,KAAK,CAACG,cAAN;AACAH,MAAAA,KAAK,CAACiF,eAAN;AACA,WAAKnE,IAAL;AACH;;;WACD,uBAAcd,KAAd,EAAqB;AACjBA,MAAAA,KAAK,CAACG,cAAN;AACAH,MAAAA,KAAK,CAACiF,eAAN;AACA,WAAKpE,IAAL;AACH;;;WACD,0BAAiBqE,CAAjB,EAAoB;AAChB,UAAIA,CAAC,CAACC,MAAF,KAAaD,CAAC,CAACE,aAAf,IAAgC,KAAKC,YAAzC,EAAuD;AACnD,aAAK9E,cAAL,CAAoByE,IAApB;AACH;AACJ;;;WACD,0BAAiBhF,KAAjB,EAAwB;AACpB,UAAIA,KAAK,CAACW,OAAN,KAAkB,OAAtB,EAA+B;AAC3B,aAAK2E,sBAAL;AACH,OAFD,MAGK,IAAItF,KAAK,CAACW,OAAN,KAAkB,OAAtB,EAA+B;AAChC,aAAK4E,sBAAL;AACH;;AACD,WAAK9E,qBAAL,CAA2BuE,IAA3B,CAAgChF,KAAhC;AACH;;;WACD,yBAAgBA,KAAhB,EAAuB;AACnB,UAAIA,KAAK,CAACW,OAAN,KAAkB,OAAtB,EAA+B;AAC3B,aAAK2E,sBAAL;AACH,OAFD,MAGK,IAAItF,KAAK,CAACW,OAAN,KAAkB,OAAtB,EAA+B;AAChC,aAAK4E,sBAAL;AACH;;AACD,WAAK9E,qBAAL,CAA2BuE,IAA3B,CAAgChF,KAAhC;AACH;;;WACD,+BAAsB;AAClB,WAAKyD,cAAL,GAAsB,OAAtB;AACA,WAAKN,GAAL,CAAS2B,YAAT;AACH;;;WACD,yBAAgB;AACZ,WAAKvB,UAAL,GAAkB,IAAlB;AACH;;;WACD,0BAAiB;AACb,WAAKA,UAAL,GAAkB,KAAlB;AACA,UAAMxH,KAAK,GAAG,KAAKyJ,QAAL,CAAcC,aAAd,CAA4BC,WAA5B,GAA0C,KAAKrB,IAA7D;AACA,UAAMrI,MAAM,GAAG,KAAKwJ,QAAL,CAAcC,aAAd,CAA4BE,YAA5B,GAA2C,KAAKtB,IAA/D;;AACA,uBAAsB3C,SAAS,CAAC,KAAK8D,QAAL,CAAcC,aAAf,CAA/B;AAAA,UAAQjE,IAAR,cAAQA,IAAR;AAAA,UAAcC,GAAd,cAAcA,GAAd;;AACA,2BAAqDgB,aAAa,EAAlE;AAAA,UAAetB,WAAf,kBAAQpF,KAAR;AAAA,UAAoCqF,YAApC,kBAA4BpF,MAA5B;;AACA,UAAM4J,QAAQ,GAAG,KAAKrB,MAAL,GAAc,GAAd,KAAsB,CAAvC;AACA,UAAMsB,gBAAgB,GAAG;AACrB9J,QAAAA,KAAK,EAAE6J,QAAQ,GAAG5J,MAAH,GAAYD,KADN;AAErBC,QAAAA,MAAM,EAAE4J,QAAQ,GAAG7J,KAAH,GAAWC,MAFN;AAGrBwF,QAAAA,IAAI,EAAJA,IAHqB;AAIrBC,QAAAA,GAAG,EAAHA,GAJqB;AAKrBN,QAAAA,WAAW,EAAXA,WALqB;AAMrBC,QAAAA,YAAY,EAAZA;AANqB,OAAzB;AAQA,UAAM0E,aAAa,GAAG9E,qBAAqB,CAAC6E,gBAAD,CAA3C;;AACA,UAAIhN,QAAQ,CAACiN,aAAa,CAACzE,CAAf,CAAR,IAA6BxI,QAAQ,CAACiN,aAAa,CAACxE,CAAf,CAAzC,EAA4D;AACxD,aAAK2C,QAAL,GAAgBC,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKF,QAAvB,CAAd,EAAgD6B,aAAhD,CAAhB;AACH;AACJ;;;WACD,uBAAc;AACV,WAAK1B,QAAL,CAAcvD,IAAd;AACA,WAAKuD,QAAL,CAAc2B,QAAd;AACH;;;WACD,uCAA8B;AAC1B,WAAK9J,qBAAL,qBAAwC,KAAKoI,IAA7C,eAAsD,KAAKA,IAA3D,yBAA8E,KAAKE,MAAnF;AACH;;;WACD,8CAAqC;AACjC,WAAKb,4BAAL,yBAAmD,KAAKO,QAAL,CAAc5C,CAAjE,iBAAyE,KAAK4C,QAAL,CAAc3C,CAAvF;AACH;;;WACD,iCAAwB;AACpB,WAAKhG,eAAL,GAAuB,KAAK+I,IAAL,IAAa,CAApC;AACH;;;WACD,kCAAyB;AACrB,UAAI,KAAK2B,iBAAT,EAA4B;AACxB;AACH;;AACD,UAAMC,eAAe,GAAG,KAAKpG,UAAL,CAAgBoG,eAAxC;;AACA,UAAIA,eAAJ,EAAqB;AACjBA,QAAAA,eAAe,CAACC,SAAhB,CAA0BC,GAA1B,CAA8BrH,mBAAmB,CAACC,KAAlD;AACAkH,QAAAA,eAAe,CAACC,SAAhB,CAA0BC,GAA1B,CAA8BrH,mBAAmB,CAACE,WAAlD;AACH;AACJ;;;WACD,kCAAyB;AACrB,UAAI,KAAKgH,iBAAT,EAA4B;AACxB;AACH;;AACD,UAAMC,eAAe,GAAG,KAAKpG,UAAL,CAAgBoG,eAAxC;;AACA,UAAIA,eAAJ,EAAqB;AACjBA,QAAAA,eAAe,CAACC,SAAhB,CAA0BC,GAA1B,CAA8BrH,mBAAmB,CAACG,KAAlD;AACAgH,QAAAA,eAAe,CAACC,SAAhB,CAA0BC,GAA1B,CAA8BrH,mBAAmB,CAACI,WAAlD;AACH;AACJ;;;WACD,iBAAQ;AACJ,WAAKmF,IAAL,GAAY,CAAZ;AACA,WAAKE,MAAL,GAAc,CAAd;AACA,WAAKN,QAAL,GAAgBC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBlB,eAAlB,CAAhB;AACH;;;;;;AAELC,uBAAuB,CAACpF,IAAxB,GAA+B,SAASsI,+BAAT,CAAyCpI,CAAzC,EAA4C;AAAE,SAAO,KAAKA,CAAC,IAAIkF,uBAAV,EAAmCnJ,MAAM,CAACsM,iBAAP,CAAyBtM,MAAM,CAAC9B,iBAAhC,CAAnC,EAAuF8B,MAAM,CAACsM,iBAAP,CAAyBrM,MAAM,CAACrB,eAAhC,CAAvF,EAAyIoB,MAAM,CAACsM,iBAAP,CAAyBhH,qBAAzB,CAAzI,EAA0LtF,MAAM,CAACsM,iBAAP,CAAyBpM,MAAM,CAACd,UAAhC,CAA1L,CAAP;AAAgP,CAA7T;;AACA+J,uBAAuB,CAACjF,IAAxB,GAA+B,aAAclE,MAAM,CAACmE,iBAAP,CAAyB;AAAE3C,EAAAA,IAAI,EAAE2H,uBAAR;AAAiC/E,EAAAA,SAAS,EAAE,CAAC,CAAC,kBAAD,CAAD,CAA5C;AAAoEmI,EAAAA,SAAS,EAAE,SAASC,6BAAT,CAAuC9L,EAAvC,EAA2CC,GAA3C,EAAgD;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AAC3MV,MAAAA,MAAM,CAACyM,WAAP,CAAmBjM,GAAnB,EAAwB,CAAxB;AACH;;AAAC,QAAIE,EAAE,GAAG,CAAT,EAAY;AACV,UAAIgM,EAAJ;;AACA1M,MAAAA,MAAM,CAAC2M,cAAP,CAAsBD,EAAE,GAAG1M,MAAM,CAAC4M,WAAP,EAA3B,MAAqDjM,GAAG,CAAC8K,QAAJ,GAAeiB,EAAE,CAACG,KAAvE;AACH;AAAE,GAL+D;AAK7DC,EAAAA,SAAS,EAAE,CAAC,UAAD,EAAa,IAAb,EAAmB,MAAnB,EAA2B,UAA3B,CALkD;AAKVC,EAAAA,QAAQ,EAAE,CALA;AAKGC,EAAAA,YAAY,EAAE,SAASC,oCAAT,CAA8CvM,EAA9C,EAAkDC,GAAlD,EAAuD;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AACpJV,MAAAA,MAAM,CAACkN,uBAAP,CAA+B,mBAA/B,EAAoD,SAASC,qEAAT,CAA+EjK,MAA/E,EAAuF;AAAE,eAAOvC,GAAG,CAACyM,gBAAJ,CAAqBlK,MAArB,CAAP;AAAsC,OAAnL,EAAqL,kBAArL,EAAyM,SAASmK,oEAAT,CAA8EnK,MAA9E,EAAsF;AAAE,eAAOvC,GAAG,CAAC2M,eAAJ,CAAoBpK,MAApB,CAAP;AAAqC,OAAtU;AACAlD,MAAAA,MAAM,CAACa,UAAP,CAAkB,OAAlB,EAA2B,SAAS0M,gDAAT,CAA0DrK,MAA1D,EAAkE;AAAE,eAAOvC,GAAG,CAAC6M,gBAAJ,CAAqBtK,MAArB,CAAP;AAAsC,OAArI;AACH;;AAAC,QAAIxC,EAAE,GAAG,CAAT,EAAY;AACVV,MAAAA,MAAM,CAACyN,uBAAP,CAA+B,YAA/B,EAA6C9M,GAAG,CAACkF,MAAJ,CAAWL,aAAxD,EAAuE,aAAvE,EAAsF7E,GAAG,CAAC+I,cAA1F;AACA1J,MAAAA,MAAM,CAAC+B,WAAP,CAAmB,SAAnB,EAA8BpB,GAAG,CAACkF,MAAJ,CAAW6H,QAAzC;AACA1N,MAAAA,MAAM,CAACsB,WAAP,CAAmB,0BAAnB,EAA+CX,GAAG,CAAC6I,UAAnD,EAA+D,wBAA/D,EAAyF,IAAzF;AACH;AAAE,GAZ+D;AAY7DnF,EAAAA,QAAQ,EAAE,CAAC,gBAAD,CAZmD;AAY/BE,EAAAA,KAAK,EAAE,EAZwB;AAYpBC,EAAAA,IAAI,EAAE,CAZc;AAYXmJ,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,mBAAJ,CAAD,EAA2B,CAAC,UAAD,EAAa,GAAb,EAAkB,aAAlB,EAAiC,MAAjC,EAAyC,CAAzC,EAA4C,OAA5C,EAAqD,GAArD,EAA0D,QAA1D,EAAoE,GAApE,EAAyE,UAAzE,EAAqF,QAArF,EAA+F,SAA/F,EAA0G,MAA1G,CAA3B,EAA8I,CAAC,CAAD,EAAI,2BAAJ,CAA9I,EAAgL,CAAC,CAAD,EAAI,wBAAJ,CAAhL,EAA+M,CAAC,CAAD,EAAI,8BAAJ,CAA/M,EAAoP,CAAC,OAAD,EAAU,wCAAV,EAAoD,CAApD,EAAuD,iDAAvD,EAA0G,OAA1G,EAAmH,CAAnH,EAAsH,OAAtH,EAA+H,SAA/H,CAApP,EAA+X,CAAC,SAAD,EAAY,EAAZ,EAAgB,CAAhB,EAAmB,+BAAnB,EAAoD,CAApD,EAAuD,yBAAvD,EAAkF,WAAlF,EAA+F,iBAA/F,CAA/X,EAAkf,CAAC,CAAD,EAAI,OAAJ,EAAa,SAAb,CAAlf,EAA2gB,CAAC,CAAD,EAAI,MAAJ,CAA3gB,EAAwhB,CAAC,CAAD,EAAI,wCAAJ,EAA8C,CAA9C,EAAiD,OAAjD,CAAxhB,EAAmlB,CAAC,SAAD,EAAY,EAAZ,EAAgB,SAAhB,EAA2B,SAA3B,EAAsC,CAAtC,EAAyC,mCAAzC,EAA8E,CAA9E,EAAiF,QAAjF,CAAnlB,EAA+qB,CAAC,eAAD,EAAkB,EAAlB,EAAsB,OAAtB,EAA+B,uBAA/B,EAAwD,CAAxD,EAA2D,OAA3D,EAAoE,QAApE,EAA8E,WAA9E,EAA2F,CAA3F,EAA8F,MAA9F,CAA/qB,EAAsxB,CAAC,eAAD,EAAkB,EAAlB,EAAsB,CAAtB,EAAyB,uBAAzB,CAAtxB,EAAy0B,CAAC,QAAD,EAAW,EAAX,CAAz0B,EAAy1B,CAAC,CAAD,EAAI,+BAAJ,EAAqC,CAArC,EAAwC,OAAxC,CAAz1B,EAA24B,CAAC,SAAD,EAAY,EAAZ,EAAgB,QAAhB,EAA0B,MAA1B,EAAkC,SAAlC,EAA6C,SAA7C,CAA34B,EAAo8B,CAAC,CAAD,EAAI,gCAAJ,EAAsC,CAAtC,EAAyC,OAAzC,CAAp8B,EAAu/B,CAAC,SAAD,EAAY,EAAZ,EAAgB,QAAhB,EAA0B,OAA1B,EAAmC,SAAnC,EAA8C,SAA9C,CAAv/B,CAZG;AAY+iClJ,EAAAA,QAAQ,EAAE,SAASmJ,gCAAT,CAA0ClN,EAA1C,EAA8CC,GAA9C,EAAmD;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AACxrCV,MAAAA,MAAM,CAACY,cAAP,CAAsB,CAAtB,EAAyB,KAAzB,EAAgC,CAAhC;AACAZ,MAAAA,MAAM,CAACkB,SAAP,CAAiB,CAAjB,EAAoB,KAApB,EAA2B,CAA3B;AACAlB,MAAAA,MAAM,CAACY,cAAP,CAAsB,CAAtB,EAAyB,KAAzB,EAAgC,CAAhC;AACAZ,MAAAA,MAAM,CAACY,cAAP,CAAsB,CAAtB,EAAyB,KAAzB,EAAgC,CAAhC;AACAZ,MAAAA,MAAM,CAACY,cAAP,CAAsB,CAAtB,EAAyB,IAAzB,EAA+B,CAA/B;AACAZ,MAAAA,MAAM,CAACyC,UAAP,CAAkB,CAAlB,EAAqBhC,qCAArB,EAA4D,CAA5D,EAA+D,CAA/D,EAAkE,IAAlE,EAAwE,CAAxE;AACAT,MAAAA,MAAM,CAACmB,YAAP;AACAnB,MAAAA,MAAM,CAACY,cAAP,CAAsB,CAAtB,EAAyB,KAAzB,EAAgC,CAAhC;AACAZ,MAAAA,MAAM,CAACa,UAAP,CAAkB,WAAlB,EAA+B,SAASgN,yDAAT,GAAqE;AAAE,eAAOlN,GAAG,CAACmN,aAAJ,EAAP;AAA6B,OAAnI,EAAqI,iBAArI,EAAwJ,SAASC,+DAAT,GAA2E;AAAE,eAAOpN,GAAG,CAACqN,cAAJ,EAAP;AAA8B,OAAnQ;AACAhO,MAAAA,MAAM,CAACyC,UAAP,CAAkB,CAAlB,EAAqBF,+CAArB,EAAsE,CAAtE,EAAyE,CAAzE,EAA4E,cAA5E,EAA4F,CAA5F;AACAvC,MAAAA,MAAM,CAACmB,YAAP;AACAnB,MAAAA,MAAM,CAACyC,UAAP,CAAkB,CAAlB,EAAqBK,+CAArB,EAAsE,CAAtE,EAAyE,CAAzE,EAA4E,cAA5E,EAA4F,CAA5F;AACA9C,MAAAA,MAAM,CAACmB,YAAP;AACAnB,MAAAA,MAAM,CAACmB,YAAP;AACAnB,MAAAA,MAAM,CAACkB,SAAP,CAAiB,CAAjB,EAAoB,KAApB,EAA2B,CAA3B;AACAlB,MAAAA,MAAM,CAACmB,YAAP;AACH;;AAAC,QAAIT,EAAE,GAAG,CAAT,EAAY;AACVV,MAAAA,MAAM,CAACyB,SAAP,CAAiB,CAAjB;AACAzB,MAAAA,MAAM,CAAC0B,UAAP,CAAkB,SAAlB,EAA6Bf,GAAG,CAACiJ,UAAjC;AACA5J,MAAAA,MAAM,CAACyB,SAAP,CAAiB,CAAjB;AACAzB,MAAAA,MAAM,CAAC+B,WAAP,CAAmB,WAAnB,EAAgCpB,GAAG,CAACgJ,4BAApC;AACA3J,MAAAA,MAAM,CAAC0B,UAAP,CAAkB,yBAAlB,EAA6Cf,GAAG,CAACuJ,QAAjD;AACAlK,MAAAA,MAAM,CAACyB,SAAP,CAAiB,CAAjB;AACAzB,MAAAA,MAAM,CAAC0B,UAAP,CAAkB,SAAlB,EAA6Bf,GAAG,CAAC+C,MAAjC;AACA1D,MAAAA,MAAM,CAACyB,SAAP,CAAiB,CAAjB;AACAzB,MAAAA,MAAM,CAAC0B,UAAP,CAAkB,MAAlB,EAA0Bf,GAAG,CAAC+C,MAAJ,CAAWC,MAAX,GAAoB,CAA9C;AACH;AAAE,GAvC+D;AAuC7DsK,EAAAA,UAAU,EAAE,CAAC9N,MAAM,CAAC+N,OAAR,EAAiB9N,MAAM,CAAC+N,OAAxB,EAAiChO,MAAM,CAACiO,IAAxC,EAA8C/N,MAAM,CAACgO,eAArD,EAAsEjO,MAAM,CAACkO,aAA7E,CAvCiD;AAuC4CzJ,EAAAA,aAAa,EAAE,CAvC3D;AAuC8D0J,EAAAA,IAAI,EAAE;AAAEC,IAAAA,SAAS,EAAE,CAAC5O,UAAD;AAAb,GAvCpE;AAuCiGkF,EAAAA,eAAe,EAAE;AAvClH,CAAzB,CAA7C;;AAwCAqE,uBAAuB,CAACsF,cAAxB,GAAyC;AAAA,SAAM,CAC3C;AAAEjN,IAAAA,IAAI,EAAEtD;AAAR,GAD2C,EAE3C;AAAEsD,IAAAA,IAAI,EAAE5C;AAAR,GAF2C,EAG3C;AAAE4C,IAAAA,IAAI,EAAE8D;AAAR,GAH2C,EAI3C;AAAE9D,IAAAA,IAAI,EAAEpC;AAAR,GAJ2C,CAAN;AAAA,CAAzC;;AAMA+J,uBAAuB,CAACuF,cAAxB,GAAyC;AACrCjD,EAAAA,QAAQ,EAAE,CAAC;AAAEjK,IAAAA,IAAI,EAAErD,SAAR;AAAmBwQ,IAAAA,IAAI,EAAE,CAAC,QAAD;AAAzB,GAAD;AAD2B,CAAzC;AAIA;AACA;AACA;AACA;;IACMC,c;AACF,0BAAYC,OAAZ,EAAqBC,QAArB,EAA+BzF,eAA/B,EAAgD0F,cAAhD,EAAgE;AAAA;;AAC5D,SAAKF,OAAL,GAAeA,OAAf;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKzF,eAAL,GAAuBA,eAAvB;AACA,SAAK0F,cAAL,GAAsBA,cAAtB;AACH;;;;WACD,iBAAQrL,MAAR,EAAgBsL,OAAhB,EAAyB;AACrB,aAAO,KAAKC,OAAL,CAAavL,MAAb,EAAqBsL,OAArB,CAAP;AACH;;;WACD,iBAAQtL,MAAR,EAAgBmC,MAAhB,EAAwB;AACpB,UAAMqJ,YAAY,GAAG/E,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,IAAI9E,qBAAJ,EAAlB,CAAd,EAA+DO,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuCA,MAAvC,GAAgD,EAA/G,CAArB;AACA,UAAMC,UAAU,GAAG,KAAKqJ,aAAL,CAAmBD,YAAnB,CAAnB;AACA,UAAME,gBAAgB,GAAG,KAAKC,sBAAL,CAA4BvJ,UAA5B,EAAwCoJ,YAAxC,CAAzB;AACAE,MAAAA,gBAAgB,CAACE,SAAjB,CAA2B5L,MAA3B;AACA,UAAM6L,UAAU,GAAG,IAAI5J,iBAAJ,CAAsByJ,gBAAtB,EAAwCF,YAAxC,EAAsDpJ,UAAtD,CAAnB;AACAsJ,MAAAA,gBAAgB,CAACG,UAAjB,GAA8BA,UAA9B;AACA,aAAOA,UAAP;AACH;;;WACD,gCAAuBzJ,UAAvB,EAAmCD,MAAnC,EAA2C;AACvC,UAAMiJ,QAAQ,GAAG1Q,QAAQ,CAACoR,MAAT,CAAgB;AAC7BC,QAAAA,MAAM,EAAE,KAAKX,QADgB;AAE7BY,QAAAA,SAAS,EAAE,CACP;AAAEC,UAAAA,OAAO,EAAEvQ,UAAX;AAAuBwQ,UAAAA,QAAQ,EAAE9J;AAAjC,SADO,EAEP;AAAE6J,UAAAA,OAAO,EAAErK,qBAAX;AAAkCsK,UAAAA,QAAQ,EAAE/J;AAA5C,SAFO;AAFkB,OAAhB,CAAjB;AAOA,UAAMgK,eAAe,GAAG,IAAIrQ,eAAJ,CAAoB2J,uBAApB,EAA6C,IAA7C,EAAmD2F,QAAnD,CAAxB;AACA,UAAMgB,YAAY,GAAGhK,UAAU,CAACiK,MAAX,CAAkBF,eAAlB,CAArB;AACA,aAAOC,YAAY,CAACE,QAApB;AACH;;;WACD,uBAAcnK,MAAd,EAAsB;AAClB,UAAIyD,EAAJ,EAAQC,EAAR;;AACA,UAAM0G,YAAY,GAAG,KAAK5G,eAAL,CAAqByB,qBAArB,CAA2CzF,qBAA3C,KAAqE,EAA1F;AACA,UAAM6K,aAAa,GAAG,IAAI7Q,aAAJ,CAAkB;AACpC8Q,QAAAA,WAAW,EAAE,IADuB;AAEpCC,QAAAA,cAAc,EAAE,KAAKvB,OAAL,CAAawB,gBAAb,CAA8BC,KAA9B,EAFoB;AAGpCC,QAAAA,gBAAgB,EAAE,KAAK1B,OAAL,CAAa3E,QAAb,GAAwBsG,MAAxB,EAHkB;AAIpCC,QAAAA,mBAAmB,EAAE,CAAClH,EAAE,GAAG,CAACD,EAAE,GAAGzD,MAAM,CAACH,mBAAb,MAAsC,IAAtC,IAA8C4D,EAAE,KAAK,KAAK,CAA1D,GAA8DA,EAA9D,GAAmE2G,YAAY,CAACvK,mBAAtF,MAA+G,IAA/G,IAAuH6D,EAAE,KAAK,KAAK,CAAnI,GAAuIA,EAAvI,GAA4I,IAJ7H;AAKpCmH,QAAAA,aAAa,EAAEtL,6BALqB;AAMpCuL,QAAAA,SAAS,EAAE9K,MAAM,CAAC+K,WAAP,IAAsBX,YAAY,CAACW,WAAnC,IAAkD,KAAK7B,cAAL,CAAoB8B;AAN7C,OAAlB,CAAtB;AAQA,aAAO,KAAKhC,OAAL,CAAaW,MAAb,CAAoBU,aAApB,CAAP;AACH;;;;;;AAELtB,cAAc,CAAC7K,IAAf,GAAsB,SAAS+M,sBAAT,CAAgC7M,CAAhC,EAAmC;AAAE,SAAO,KAAKA,CAAC,IAAI2K,cAAV,EAA0B5O,MAAM,CAAC+Q,QAAP,CAAgB7Q,MAAM,CAACZ,OAAvB,CAA1B,EAA2DU,MAAM,CAAC+Q,QAAP,CAAgB/Q,MAAM,CAAC5B,QAAvB,CAA3D,EAA6F4B,MAAM,CAAC+Q,QAAP,CAAgB9Q,MAAM,CAACrB,eAAvB,CAA7F,EAAsIoB,MAAM,CAAC+Q,QAAP,CAAgBzQ,MAAM,CAAC5C,cAAvB,EAAuC,CAAvC,CAAtI,CAAP;AAA0L,CAArP;;AACAkR,cAAc,CAACoC,KAAf,GAAuB,aAAchR,MAAM,CAACiR,kBAAP,CAA0B;AAAEC,EAAAA,KAAK,EAAEtC,cAAT;AAAyBuC,EAAAA,OAAO,EAAEvC,cAAc,CAAC7K;AAAjD,CAA1B,CAArC;;AACA6K,cAAc,CAACH,cAAf,GAAgC;AAAA,SAAM,CAClC;AAAEjN,IAAAA,IAAI,EAAElC;AAAR,GADkC,EAElC;AAAEkC,IAAAA,IAAI,EAAEpD;AAAR,GAFkC,EAGlC;AAAEoD,IAAAA,IAAI,EAAE5C;AAAR,GAHkC,EAIlC;AAAE4C,IAAAA,IAAI,EAAE9D,cAAR;AAAwB0T,IAAAA,UAAU,EAAE,CAAC;AAAE5P,MAAAA,IAAI,EAAElD;AAAR,KAAD;AAApC,GAJkC,CAAN;AAAA,CAAhC;;AAOA,IAAM+S,uBAAuB,GAAG,OAAhC;;IACMC,gB;AACF,4BAAYtJ,QAAZ,EAAsBqB,eAAtB,EAAuCkI,UAAvC,EAAmDC,cAAnD,EAAmEpI,GAAnE,EAAwEqI,WAAxE,EAAqF1C,cAArF,EAAqG;AAAA;;AACjG,SAAK/G,QAAL,GAAgBA,QAAhB;AACA,SAAKqB,eAAL,GAAuBA,eAAvB;AACA,SAAKkI,UAAL,GAAkBA,UAAlB;AACA,SAAKC,cAAL,GAAsBA,cAAtB;AACA,SAAKpI,GAAL,GAAWA,GAAX;AACA,SAAKqI,WAAL,GAAmBA,WAAnB;AACA,SAAK1C,cAAL,GAAsBA,cAAtB;AACA,SAAK2C,aAAL,GAAqBL,uBAArB;AACA,SAAKM,KAAL,GAAa,EAAb;AACA,SAAKC,gBAAL,GAAwB,KAAxB;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA,SAAKC,aAAL,GAAqB,IAArB;AACA,SAAKC,MAAL,GAAc,QAAd;AACA,SAAK1H,QAAL,GAAgB,IAAIrL,OAAJ,EAAhB;AACH;;;;SACD,eAAkB;AACd,aAAO,CAAC,KAAK4S,gBAAN,IAA0B,KAAKG,MAAL,KAAgB,OAAjD;AACH;;;WACD,oBAAW;AAAA;;AACP,UAAIzI,EAAJ;;AACA,WAAK0I,QAAL;;AACA,UAAI,KAAKP,WAAT,EAAsB;AAClB,aAAKA,WAAL,CAAiBQ,QAAjB,CAA0B,IAA1B;AACH;;AACD,UAAI,KAAKlD,cAAT,EAAyB;AACrB,SAACzF,EAAE,GAAG,KAAKyF,cAAL,CAAoBmD,MAA1B,MAAsC,IAAtC,IAA8C5I,EAAE,KAAK,KAAK,CAA1D,GAA8D,KAAK,CAAnE,GAAuEA,EAAE,CAACtD,IAAH,CAAQ7G,SAAS,CAAC,KAAKkL,QAAN,CAAjB,EAAkClE,SAAlC,CAA4C,UAACwK,SAAD,EAAe;AAC9H,UAAA,MAAI,CAACwB,GAAL,GAAWxB,SAAX;;AACA,UAAA,MAAI,CAACvH,GAAL,CAASgJ,aAAT;AACH,SAHsE,CAAvE;AAIA,aAAKD,GAAL,GAAW,KAAKpD,cAAL,CAAoB8B,KAA/B;AACH;AACJ;;;WACD,uBAAc;AACV,WAAKxG,QAAL,CAAcvD,IAAd;AACA,WAAKuD,QAAL,CAAc2B,QAAd;AACH;;;WACD,qBAAY;AAAA;;AACR,UAAI,CAAC,KAAKqG,WAAV,EAAuB;AACnB;AACH;;AACD,UAAI,KAAKZ,WAAT,EAAsB;AAClB;AACA,YAAMa,iBAAiB,GAAG,KAAKb,WAAL,CAAiB/N,MAAjB,CAAwBzE,MAAxB,CAA+B,UAAAkM,CAAC;AAAA,iBAAIA,CAAC,CAACkH,WAAN;AAAA,SAAhC,CAA1B;AACA,YAAME,aAAa,GAAGD,iBAAiB,CAACE,GAAlB,CAAsB,UAAArH,CAAC;AAAA,iBAAK;AAAE/I,YAAAA,GAAG,EAAE+I,CAAC,CAACwG;AAAT,WAAL;AAAA,SAAvB,CAAtB;AACA,YAAMc,YAAY,GAAGH,iBAAiB,CAACI,SAAlB,CAA4B,UAAAC,EAAE;AAAA,iBAAI,MAAI,KAAKA,EAAb;AAAA,SAA9B,CAArB;AACA,YAAMpD,UAAU,GAAG,KAAKiC,cAAL,CAAoBoB,OAApB,CAA4BL,aAA5B,EAA2C;AAAE3B,UAAAA,WAAW,EAAE,KAAKuB;AAApB,SAA3C,CAAnB;AACA5C,QAAAA,UAAU,CAAC1I,QAAX,CAAoB4L,YAApB;AACH,OAPD,MAQK;AACD;AACA,YAAMF,cAAa,GAAG,CAAC;AAAEnQ,UAAAA,GAAG,EAAE,KAAKuP;AAAZ,SAAD,CAAtB;AACA,aAAKH,cAAL,CAAoBoB,OAApB,CAA4BL,cAA5B,EAA2C;AAAE3B,UAAAA,WAAW,EAAE,KAAKuB;AAApB,SAA3C;AACH;AACJ;;;WACD,sBAAa;AACT,aAAO,KAAKZ,UAAZ;AACH;;;WACD,qBAAYsB,OAAZ,EAAqB;AACjB,UAAQlB,KAAR,GAAkBkB,OAAlB,CAAQlB,KAAR;;AACA,UAAIA,KAAJ,EAAW;AACP,aAAKmB,UAAL,GAAkBpH,aAAlB,CAAgCtJ,GAAhC,GAAsCuP,KAAK,CAACoB,YAA5C;AACA,aAAKf,QAAL;AACH;AACJ;AACD;AACJ;AACA;AACA;;;;WACI,oBAAW;AAAA;;AACP,WAAKgB,aAAL,GAAqB,KAAKhL,QAAL,CAAciL,aAAd,CAA4B,KAA5B,CAArB;AACA,WAAKD,aAAL,CAAmB5Q,GAAnB,GAAyB,KAAKuP,KAA9B;AACA,WAAKI,MAAL,GAAc,SAAd;;AACA,UAAI,KAAKiB,aAAL,CAAmBhH,QAAvB,EAAiC;AAC7B,aAAK+F,MAAL,GAAc,QAAd;AACA,aAAKe,UAAL,GAAkBpH,aAAlB,CAAgCtJ,GAAhC,GAAsC,KAAKuP,KAA3C;AACH,OAHD,MAIK;AACD,YAAI,KAAKG,aAAT,EAAwB;AACpB,eAAKgB,UAAL,GAAkBpH,aAAlB,CAAgCtJ,GAAhC,GAAsC,KAAK0P,aAA3C;AACH,SAFD,MAGK;AACD,eAAKgB,UAAL,GAAkBpH,aAAlB,CAAgCtJ,GAAhC,GAAsC,KAAKuP,KAA3C;AACH;;AACD,aAAKqB,aAAL,CAAmBE,MAAnB,GAA4B,YAAM;AAC9B,UAAA,MAAI,CAACnB,MAAL,GAAc,QAAd;AACA,UAAA,MAAI,CAACe,UAAL,GAAkBpH,aAAlB,CAAgCtJ,GAAhC,GAAsC,MAAI,CAACuP,KAA3C;AACH,SAHD;;AAIA,aAAKqB,aAAL,CAAmBG,OAAnB,GAA6B,YAAM;AAC/B,UAAA,MAAI,CAACpB,MAAL,GAAc,OAAd;;AACA,cAAI,MAAI,CAACF,UAAT,EAAqB;AACjB,YAAA,MAAI,CAACiB,UAAL,GAAkBpH,aAAlB,CAAgCtJ,GAAhC,GAAsC,MAAI,CAACyP,UAA3C;AACH;AACJ,SALD;AAMH;AACJ;;;;;;AAELP,gBAAgB,CAACvN,IAAjB,GAAwB,SAASqP,wBAAT,CAAkCnP,CAAlC,EAAqC;AAAE,SAAO,KAAKA,CAAC,IAAIqN,gBAAV,EAA4BtR,MAAM,CAACsM,iBAAP,CAAyB1O,QAAzB,CAA5B,EAAgEoC,MAAM,CAACsM,iBAAP,CAAyBrM,MAAM,CAACrB,eAAhC,CAAhE,EAAkHoB,MAAM,CAACsM,iBAAP,CAAyBtM,MAAM,CAACvB,UAAhC,CAAlH,EAA+JuB,MAAM,CAACsM,iBAAP,CAAyBsC,cAAzB,CAA/J,EAAyM5O,MAAM,CAACsM,iBAAP,CAAyBtM,MAAM,CAAC9B,iBAAhC,CAAzM,EAA6P8B,MAAM,CAACsM,iBAAP,CAAyB1I,qBAAzB,EAAgD,CAAhD,CAA7P,EAAiT5D,MAAM,CAACsM,iBAAP,CAAyBhM,MAAM,CAAC5C,cAAhC,EAAgD,CAAhD,CAAjT,CAAP;AAA8W,CAA7a;;AACA4T,gBAAgB,CAAC+B,IAAjB,GAAwB,aAAcrT,MAAM,CAACsT,iBAAP,CAAyB;AAAE9R,EAAAA,IAAI,EAAE8P,gBAAR;AAA0BlN,EAAAA,SAAS,EAAE,CAAC,CAAC,KAAD,EAAQ,UAAR,EAAoB,EAApB,CAAD,CAArC;AAAgE4I,EAAAA,YAAY,EAAE,SAASuG,6BAAT,CAAuC7S,EAAvC,EAA2CC,GAA3C,EAAgD;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AACnMV,MAAAA,MAAM,CAACa,UAAP,CAAkB,OAAlB,EAA2B,SAAS2S,yCAAT,GAAqD;AAAE,eAAO7S,GAAG,CAAC8S,SAAJ,EAAP;AAAyB,OAA3G;AACH;AAAE,GAFwD;AAEtDC,EAAAA,MAAM,EAAE;AAAE/B,IAAAA,KAAK,EAAE,OAAT;AAAkBC,IAAAA,gBAAgB,EAAE,kBAApC;AAAwDC,IAAAA,UAAU,EAAE,YAApE;AAAkFC,IAAAA,aAAa,EAAE;AAAjG,GAF8C;AAEsEzN,EAAAA,QAAQ,EAAE,CAAC,SAAD,CAFhF;AAE6FsP,EAAAA,QAAQ,EAAE,CAAC3T,MAAM,CAAC4T,oBAAR;AAFvG,CAAzB,CAAtC;;AAGAtC,gBAAgB,CAAC7C,cAAjB,GAAkC;AAAA,SAAM,CACpC;AAAEjN,IAAAA,IAAI,EAAEqS,SAAR;AAAmBzC,IAAAA,UAAU,EAAE,CAAC;AAAE5P,MAAAA,IAAI,EAAEhD,MAAR;AAAgBmQ,MAAAA,IAAI,EAAE,CAAC/Q,QAAD;AAAtB,KAAD;AAA/B,GADoC,EAEpC;AAAE4D,IAAAA,IAAI,EAAE5C;AAAR,GAFoC,EAGpC;AAAE4C,IAAAA,IAAI,EAAE/C;AAAR,GAHoC,EAIpC;AAAE+C,IAAAA,IAAI,EAAEoN;AAAR,GAJoC,EAKpC;AAAEpN,IAAAA,IAAI,EAAEtD;AAAR,GALoC,EAMpC;AAAEsD,IAAAA,IAAI,EAAEoC,qBAAR;AAA+BwN,IAAAA,UAAU,EAAE,CAAC;AAAE5P,MAAAA,IAAI,EAAElD;AAAR,KAAD;AAA3C,GANoC,EAOpC;AAAEkD,IAAAA,IAAI,EAAE9D,cAAR;AAAwB0T,IAAAA,UAAU,EAAE,CAAC;AAAE5P,MAAAA,IAAI,EAAElD;AAAR,KAAD;AAApC,GAPoC,CAAN;AAAA,CAAlC;;AASAgT,gBAAgB,CAAC5C,cAAjB,GAAkC;AAC9BiD,EAAAA,KAAK,EAAE,CAAC;AAAEnQ,IAAAA,IAAI,EAAE9C;AAAR,GAAD,CADuB;AAE9BkT,EAAAA,gBAAgB,EAAE,CAAC;AAAEpQ,IAAAA,IAAI,EAAE9C;AAAR,GAAD,CAFY;AAG9BmT,EAAAA,UAAU,EAAE,CAAC;AAAErQ,IAAAA,IAAI,EAAE9C;AAAR,GAAD,CAHkB;AAI9BoT,EAAAA,aAAa,EAAE,CAAC;AAAEtQ,IAAAA,IAAI,EAAE9C;AAAR,GAAD;AAJe,CAAlC;;AAMAlB,UAAU,CAAC,CACPuB,YAAY,EADL,EAEPF,UAAU,EAFH,EAGPpB,UAAU,CAAC,aAAD,EAAgBqW,OAAhB,CAHH,CAAD,EAIPxC,gBAAgB,CAACyC,SAJV,EAIqB,kBAJrB,EAIyC,KAAK,CAJ9C,CAAV;;AAKAvW,UAAU,CAAC,CACPqB,UAAU,EADH,EAEPpB,UAAU,CAAC,aAAD,EAAgB0M,MAAhB,CAFH,CAAD,EAGPmH,gBAAgB,CAACyC,SAHV,EAGqB,YAHrB,EAGmC,KAAK,CAHxC,CAAV;;AAIAvW,UAAU,CAAC,CACPqB,UAAU,EADH,EAEPpB,UAAU,CAAC,aAAD,EAAgB0M,MAAhB,CAFH,CAAD,EAGPmH,gBAAgB,CAACyC,SAHV,EAGqB,eAHrB,EAGsC,KAAK,CAH3C,CAAV;;AAIA,CAAC,YAAY;AAAE,GAAC,OAAOC,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmDhU,MAAM,CAACiU,iBAAP,CAAyBrQ,qBAAzB,EAAgD,CAAC;AAC3GpC,IAAAA,IAAI,EAAE1D,SADqG;AAE3G6Q,IAAAA,IAAI,EAAE,CAAC;AACCuF,MAAAA,QAAQ,EAAE,gBADX;AAEC7P,MAAAA,QAAQ,EAAE,cAFX;AAGCI,MAAAA,QAAQ,EAAE,2BAHX;AAIC0P,MAAAA,mBAAmB,EAAE,KAJtB;AAKCrP,MAAAA,eAAe,EAAE/G,uBAAuB,CAACqW,MAL1C;AAMCvP,MAAAA,aAAa,EAAE7G,iBAAiB,CAACqW;AANlC,KAAD;AAFqG,GAAD,CAAhD,EAU1D,YAAY;AAAE,WAAO,EAAP;AAAY,GAVgC,EAU9B,IAV8B,CAAnD;AAU6B,CAV5C;;AAWA,CAAC,YAAY;AAAE,GAAC,OAAOL,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmDhU,MAAM,CAACiU,iBAAP,CAAyB9K,uBAAzB,EAAkD,CAAC;AAC7G3H,IAAAA,IAAI,EAAE1D,SADuG;AAE7G6Q,IAAAA,IAAI,EAAE,CAAC;AACCuF,MAAAA,QAAQ,EAAE,kBADX;AAEC7P,MAAAA,QAAQ,EAAE,gBAFX;AAGCiQ,MAAAA,UAAU,EAAE,CAAC1U,UAAD,CAHb;AAIC6E,MAAAA,QAAQ,4+EAJT;AA8DC0P,MAAAA,mBAAmB,EAAE,KA9DtB;AA+DCrP,MAAAA,eAAe,EAAE/G,uBAAuB,CAACqW,MA/D1C;AAgECvP,MAAAA,aAAa,EAAE7G,iBAAiB,CAACqW,IAhElC;AAiECE,MAAAA,IAAI,EAAE;AACF,4CAAoC,YADlC;AAEF,0BAAkB,iBAFhB;AAGF,0CAAkC,MAHhC;AAIF,wBAAgB,sBAJd;AAKF,yBAAiB,gBALf;AAMF,+BAAuB,0BANrB;AAOF,8BAAsB,yBAPpB;AAQF,mBAAW,0BART;AASFC,QAAAA,QAAQ,EAAE,IATR;AAUFC,QAAAA,IAAI,EAAE;AAVJ;AAjEP,KAAD;AAFuG,GAAD,CAAlD,EAgF1D,YAAY;AAAE,WAAO,CAAC;AAAEjT,MAAAA,IAAI,EAAExB,MAAM,CAAC9B;AAAf,KAAD,EAAqC;AAAEsD,MAAAA,IAAI,EAAEvB,MAAM,CAACrB;AAAf,KAArC,EAAuE;AAAE4C,MAAAA,IAAI,EAAE8D;AAAR,KAAvE,EAAwG;AAAE9D,MAAAA,IAAI,EAAEtB,MAAM,CAACd;AAAf,KAAxG,CAAP;AAA8I,GAhFlG,EAgFoG;AAAEqM,IAAAA,QAAQ,EAAE,CAAC;AACvKjK,MAAAA,IAAI,EAAErD,SADiK;AAEvKwQ,MAAAA,IAAI,EAAE,CAAC,QAAD;AAFiK,KAAD;AAAZ,GAhFpG,CAAnD;AAmFC,CAnFhB;;AAoFA,CAAC,YAAY;AAAE,GAAC,OAAOqF,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmDhU,MAAM,CAACiU,iBAAP,CAAyBrF,cAAzB,EAAyC,CAAC;AACpGpN,IAAAA,IAAI,EAAEnD;AAD8F,GAAD,CAAzC,EAE1D,YAAY;AAAE,WAAO,CAAC;AAAEmD,MAAAA,IAAI,EAAEtB,MAAM,CAACZ;AAAf,KAAD,EAA2B;AAAEkC,MAAAA,IAAI,EAAExB,MAAM,CAAC5B;AAAf,KAA3B,EAAsD;AAAEoD,MAAAA,IAAI,EAAEvB,MAAM,CAACrB;AAAf,KAAtD,EAAwF;AAAE4C,MAAAA,IAAI,EAAElB,MAAM,CAAC5C,cAAf;AAA+B0T,MAAAA,UAAU,EAAE,CAAC;AACjJ5P,QAAAA,IAAI,EAAElD;AAD2I,OAAD;AAA3C,KAAxF,CAAP;AAEF,GAJ8C,EAI5C,IAJ4C,CAAnD;AAIe,CAJ9B;;AAKA,CAAC,YAAY;AAAE,GAAC,OAAO0V,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmDhU,MAAM,CAACiU,iBAAP,CAAyB3C,gBAAzB,EAA2C,CAAC;AACtG9P,IAAAA,IAAI,EAAEjD,SADgG;AAEtGoQ,IAAAA,IAAI,EAAE,CAAC;AACCuF,MAAAA,QAAQ,EAAE,eADX;AAEC7P,MAAAA,QAAQ,EAAE,SAFX;AAGCkQ,MAAAA,IAAI,EAAE;AACF,mBAAW;AADT;AAHP,KAAD;AAFgG,GAAD,CAA3C,EAS1D,YAAY;AAAE,WAAO,CAAC;AAAE/S,MAAAA,IAAI,EAAEqS,SAAR;AAAmBzC,MAAAA,UAAU,EAAE,CAAC;AAC9C5P,QAAAA,IAAI,EAAEhD,MADwC;AAE9CmQ,QAAAA,IAAI,EAAE,CAAC/Q,QAAD;AAFwC,OAAD;AAA/B,KAAD,EAGX;AAAE4D,MAAAA,IAAI,EAAEvB,MAAM,CAACrB;AAAf,KAHW,EAGuB;AAAE4C,MAAAA,IAAI,EAAExB,MAAM,CAACvB;AAAf,KAHvB,EAGoD;AAAE+C,MAAAA,IAAI,EAAEoN;AAAR,KAHpD,EAG8E;AAAEpN,MAAAA,IAAI,EAAExB,MAAM,CAAC9B;AAAf,KAH9E,EAGkH;AAAEsD,MAAAA,IAAI,EAAEoC,qBAAR;AAA+BwN,MAAAA,UAAU,EAAE,CAAC;AAC3K5P,QAAAA,IAAI,EAAElD;AADqK,OAAD;AAA3C,KAHlH,EAKX;AAAEkD,MAAAA,IAAI,EAAElB,MAAM,CAAC5C,cAAf;AAA+B0T,MAAAA,UAAU,EAAE,CAAC;AAC9C5P,QAAAA,IAAI,EAAElD;AADwC,OAAD;AAA3C,KALW,CAAP;AAOF,GAhB8C,EAgB5C;AAAEqT,IAAAA,KAAK,EAAE,CAAC;AACpBnQ,MAAAA,IAAI,EAAE9C;AADc,KAAD,CAAT;AAEVkT,IAAAA,gBAAgB,EAAE,CAAC;AACnBpQ,MAAAA,IAAI,EAAE9C;AADa,KAAD,CAFR;AAIVmT,IAAAA,UAAU,EAAE,CAAC;AACbrQ,MAAAA,IAAI,EAAE9C;AADO,KAAD,CAJF;AAMVoT,IAAAA,aAAa,EAAE,CAAC;AAChBtQ,MAAAA,IAAI,EAAE9C;AADU,KAAD;AANL,GAhB4C,CAAnD;AAwBC,CAxBhB;AA0BA;AACA;AACA;AACA;;;IACMgW,a;;;;AAENA,aAAa,CAAC3Q,IAAd,GAAqB,SAAS4Q,qBAAT,CAA+B1Q,CAA/B,EAAkC;AAAE,SAAO,KAAKA,CAAC,IAAIyQ,aAAV,GAAP;AAAoC,CAA7F;;AACAA,aAAa,CAACE,IAAd,GAAqB,aAAc5U,MAAM,CAAC6U,gBAAP,CAAwB;AAAErT,EAAAA,IAAI,EAAEkT;AAAR,CAAxB,CAAnC;AACAA,aAAa,CAACI,IAAd,GAAqB,aAAc9U,MAAM,CAAC+U,gBAAP,CAAwB;AAAErF,EAAAA,SAAS,EAAE,CAACd,cAAD,CAAb;AAA+BoG,EAAAA,OAAO,EAAE,CAAC,CAACrX,UAAD,EAAa4B,aAAb,EAA4BE,YAA5B,EAA0CI,cAA1C,EAA0DhC,YAA1D,EAAwEiC,YAAxE,EAAsFC,aAAtF,CAAD;AAAxC,CAAxB,CAAnC;;AACA,CAAC,YAAY;AAAE,GAAC,OAAOiU,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmDhU,MAAM,CAACiU,iBAAP,CAAyBS,aAAzB,EAAwC,CAAC;AACnGlT,IAAAA,IAAI,EAAE7C,QAD6F;AAEnGgQ,IAAAA,IAAI,EAAE,CAAC;AACCqG,MAAAA,OAAO,EAAE,CAACrX,UAAD,EAAa4B,aAAb,EAA4BE,YAA5B,EAA0CI,cAA1C,EAA0DhC,YAA1D,EAAwEiC,YAAxE,EAAsFC,aAAtF,CADV;AAECkV,MAAAA,OAAO,EAAE,CAAC3D,gBAAD,EAAmBnI,uBAAnB,EAA4CvF,qBAA5C,CAFV;AAGC8L,MAAAA,SAAS,EAAE,CAACd,cAAD,CAHZ;AAICsG,MAAAA,eAAe,EAAE,CAAC/L,uBAAD,CAJlB;AAKCgM,MAAAA,YAAY,EAAE,CAAC7D,gBAAD,EAAmBnI,uBAAnB,EAA4CvF,qBAA5C;AALf,KAAD;AAF6F,GAAD,CAAxC,EAS1D,IAT0D,EASpD,IAToD,CAAnD;AASO,CATtB;;AAUA,CAAC,YAAY;AAAE,GAAC,OAAOwR,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmDpV,MAAM,CAACqV,kBAAP,CAA0BX,aAA1B,EAAyC;AAAES,IAAAA,YAAY,EAAE,wBAAY;AAAE,aAAO,CAAC7D,gBAAD,EAAmBnI,uBAAnB,EAA4CvF,qBAA5C,CAAP;AAA4E,KAA1G;AAA4GoR,IAAAA,OAAO,EAAE,mBAAY;AAAE,aAAO,CAACrX,UAAD,EAAa4B,aAAb,EAA4BE,YAA5B,EAA0CI,cAA1C,EAA0DhC,YAA1D,EAAwEiC,YAAxE,EAAsFC,aAAtF,CAAP;AAA8G,KAAjP;AAAmPkV,IAAAA,OAAO,EAAE,mBAAY;AAAE,aAAO,CAAC3D,gBAAD,EAAmBnI,uBAAnB,EAA4CvF,qBAA5C,CAAP;AAA4E;AAAtV,GAAzC,CAAnD;AAAwb,CAAvc;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAEA,SAASmB,mBAAT,EAA8BK,6BAA9B,EAA6DC,qBAA7D,EAAoFiM,gBAApF,EAAsG1N,qBAAtG,EAA6H8Q,aAA7H,EAA4IvL,uBAA5I,EAAqK7D,qBAArK,EAA4LK,iBAA5L,EAA+MiJ,cAA/M,EAA+NlG,aAA/N,EAA8OzB,qBAA9O,EAAqQU,SAArQ,G,CAEA","sourcesContent":["import { __decorate, __metadata } from 'tslib';\nimport { Directionality, BidiModule } from '@angular/cdk/bidi';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport { Component, ChangeDetectionStrategy, ViewEncapsulation, EventEmitter, ChangeDetectorRef, ViewChild, Injector, Injectable, Optional, Directive, Inject, ElementRef, Input, NgModule } from '@angular/core';\nimport { NzConfigService, WithConfig } from 'ng-zorro-antd/core/config';\nimport { isNotNil, InputBoolean } from 'ng-zorro-antd/core/util';\nimport { Subject } from 'rxjs';\nimport { filter, take, takeUntil } from 'rxjs/operators';\nimport { OverlayRef, OverlayConfig, Overlay, OverlayModule } from '@angular/cdk/overlay';\nimport { ComponentPortal, PortalModule } from '@angular/cdk/portal';\nimport { ESCAPE, hasModifierKey } from '@angular/cdk/keycodes';\nimport { fadeMotion } from 'ng-zorro-antd/core/animation';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzPipesModule } from 'ng-zorro-antd/pipes';\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from 'ng-zorro-antd/core/config';\nimport * as ɵngcc2 from '@angular/cdk/overlay';\nimport * as ɵngcc3 from '@angular/common';\nimport * as ɵngcc4 from '@angular/cdk/drag-drop';\nimport * as ɵngcc5 from 'ng-zorro-antd/icon';\nimport * as ɵngcc6 from '@angular/cdk/bidi';\n\nconst _c0 = [\"*\"];\nconst _c1 = [\"imgRef\"];\nfunction NzImagePreviewComponent_li_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function NzImagePreviewComponent_li_5_Template_li_click_0_listener() { const option_r3 = ctx.$implicit; return option_r3.onClick(); });\n    ɵngcc0.ɵɵelement(1, \"span\", 10);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const option_r3 = ctx.$implicit;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"ant-image-preview-operations-operation-disabled\", ctx_r0.zoomOutDisabled && option_r3.type === \"zoomOut\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"nzType\", option_r3.icon);\n} }\nfunction NzImagePreviewComponent_ng_container_7_img_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 12, 13);\n} if (rf & 2) {\n    const image_r5 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"width\", image_r5.width)(\"height\", image_r5.height)(\"transform\", ctx_r7.previewImageTransform);\n    ɵngcc0.ɵɵattribute(\"src\", image_r5.src, ɵngcc0.ɵɵsanitizeUrl)(\"alt\", image_r5.alt);\n} }\nfunction NzImagePreviewComponent_ng_container_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NzImagePreviewComponent_ng_container_7_img_1_Template, 2, 8, \"img\", 11);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const imageIndex_r6 = ctx.index;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.index === imageIndex_r6);\n} }\nfunction NzImagePreviewComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function NzImagePreviewComponent_ng_container_8_Template_div_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r10 = ɵngcc0.ɵɵnextContext(); return ctx_r10.onSwitchLeft($event); });\n    ɵngcc0.ɵɵelement(2, \"span\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"div\", 16);\n    ɵngcc0.ɵɵlistener(\"click\", function NzImagePreviewComponent_ng_container_8_Template_div_click_3_listener($event) { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r12 = ɵngcc0.ɵɵnextContext(); return ctx_r12.onSwitchRight($event); });\n    ɵngcc0.ɵɵelement(4, \"span\", 17);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"ant-image-preview-switch-left-disabled\", ctx_r2.index <= 0);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"ant-image-preview-switch-right-disabled\", ctx_r2.index >= ctx_r2.images.length - 1);\n} }\nclass NzImageGroupComponent {\n    constructor() {\n        this.images = [];\n    }\n    addImage(image) {\n        this.images.push(image);\n    }\n}\nNzImageGroupComponent.ɵfac = function NzImageGroupComponent_Factory(t) { return new (t || NzImageGroupComponent)(); };\nNzImageGroupComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: NzImageGroupComponent, selectors: [[\"nz-image-group\"]], exportAs: [\"nzImageGroup\"], ngContentSelectors: _c0, decls: 1, vars: 0, template: function NzImageGroupComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n    } }, encapsulation: 2, changeDetection: 0 });\n\nconst FADE_CLASS_NAME_MAP = {\n    enter: 'ant-fade-enter',\n    enterActive: 'ant-fade-enter-active',\n    leave: 'ant-fade-leave',\n    leaveActive: 'ant-fade-leave-active'\n};\nconst IMAGE_PREVIEW_MASK_CLASS_NAME = 'ant-image-preview-mask';\nconst NZ_CONFIG_MODULE_NAME = 'image';\n\nclass NzImagePreviewOptions {\n    constructor() {\n        this.nzKeyboard = true;\n        this.nzNoAnimation = false;\n        this.nzMaskClosable = true;\n        this.nzCloseOnNavigation = true;\n    }\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nclass NzImagePreviewRef {\n    constructor(previewInstance, config, overlayRef) {\n        this.previewInstance = previewInstance;\n        this.config = config;\n        this.overlayRef = overlayRef;\n        overlayRef\n            .keydownEvents()\n            .pipe(filter(event => {\n            return this.config.nzKeyboard && event.keyCode === ESCAPE && !hasModifierKey(event);\n        }))\n            .subscribe(event => {\n            event.preventDefault();\n            this.close();\n        });\n        overlayRef.detachments().subscribe(() => {\n            this.overlayRef.dispose();\n        });\n        previewInstance.containerClick.pipe(take(1)).subscribe(() => {\n            this.close();\n        });\n        previewInstance.closeClick.pipe(take(1)).subscribe(() => {\n            this.close();\n        });\n        previewInstance.animationStateChanged\n            .pipe(filter(event => event.phaseName === 'done' && event.toState === 'leave'), take(1))\n            .subscribe(() => {\n            this.dispose();\n        });\n    }\n    switchTo(index) {\n        this.previewInstance.switchTo(index);\n    }\n    next() {\n        this.previewInstance.next();\n    }\n    prev() {\n        this.previewInstance.prev();\n    }\n    close() {\n        this.previewInstance.startLeaveAnimation();\n    }\n    dispose() {\n        this.overlayRef.dispose();\n    }\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n/**\n * fit content details: https://github.com/NG-ZORRO/ng-zorro-antd/pull/6154#issuecomment-745025554\n *\n * calc position x,y point\n *\n * CASE (width <= clientWidth && height <= clientHeight):\n *\n * ------------- clientWidth -------------\n * |                                     |\n * |        ------ width ------          |\n * |        |                 |          |\n * |        |                 |          |\n * client   height            |          |\n * Height   |                 |          |\n * |        |                 |          |\n * |        -------------------          |\n * |                                     |\n * |                                     |\n * ---------------------------------------\n * fixedPosition = { x: 0, y: 0 }\n *\n *\n *\n * CASE (width > clientWidth || height > clientHeight):\n *\n * ------------- clientWidth -------------\n * |        |                            |\n * |        top                          |\n * |        |                            |\n * |--left--|--------------- width -----------------\n * |        |                                      |\n * client   |                                      |\n * Height   |                                      |\n * |        |                                      |\n * |        |                                      |\n * |        height                                 |\n * |        |                                      |\n * ---------|                                      |\n *          |                                      |\n *          |                                      |\n *          |                                      |\n *          ----------------------------------------\n *\n *\n * - left || top > 0\n *   left -> 0 || top -> 0\n *\n * - (left + width) < clientWidth || (top + height) < clientHeight\n * - left | top + width | height < clientWidth | clientHeight -> Back left | top + width | height === clientWidth | clientHeight\n *\n * DEFAULT:\n * - hold position\n *\n */\nfunction getFitContentPosition(params) {\n    let fixPos = {};\n    if (params.width <= params.clientWidth && params.height <= params.clientHeight) {\n        fixPos = {\n            x: 0,\n            y: 0\n        };\n    }\n    if (params.width > params.clientWidth || params.height > params.clientHeight) {\n        fixPos = {\n            x: fitPoint(params.left, params.width, params.clientWidth),\n            y: fitPoint(params.top, params.height, params.clientHeight)\n        };\n    }\n    return fixPos;\n}\nfunction getOffset(node) {\n    const box = node.getBoundingClientRect();\n    const docElem = document.documentElement;\n    // use docElem.scrollLeft to support IE\n    return {\n        left: box.left + (window.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || document.body.clientLeft || 0),\n        top: box.top + (window.pageYOffset || docElem.scrollTop) - (docElem.clientTop || document.body.clientTop || 0)\n    };\n}\nfunction getClientSize() {\n    const width = document.documentElement.clientWidth;\n    const height = window.innerHeight || document.documentElement.clientHeight;\n    return {\n        width,\n        height\n    };\n}\nfunction fitPoint(start, size, clientSize) {\n    const startAddSize = start + size;\n    const offsetStart = (size - clientSize) / 2;\n    let distance = null;\n    if (size > clientSize) {\n        if (start > 0) {\n            distance = offsetStart;\n        }\n        if (start < 0 && startAddSize < clientSize) {\n            distance = -offsetStart;\n        }\n    }\n    else {\n        if (start < 0 || startAddSize > clientSize) {\n            distance = start < 0 ? offsetStart : -offsetStart;\n        }\n    }\n    return distance;\n}\n\nconst initialPosition = {\n    x: 0,\n    y: 0\n};\nclass NzImagePreviewComponent {\n    constructor(cdr, nzConfigService, config, overlayRef) {\n        var _a, _b;\n        this.cdr = cdr;\n        this.nzConfigService = nzConfigService;\n        this.config = config;\n        this.overlayRef = overlayRef;\n        this.images = [];\n        this.index = 0;\n        this.isDragging = false;\n        this.visible = true;\n        this.animationState = 'enter';\n        this.animationStateChanged = new EventEmitter();\n        this.previewImageTransform = '';\n        this.previewImageWrapperTransform = '';\n        this.operations = [\n            {\n                icon: 'close',\n                onClick: () => {\n                    this.onClose();\n                },\n                type: 'close'\n            },\n            {\n                icon: 'zoom-in',\n                onClick: () => {\n                    this.onZoomIn();\n                },\n                type: 'zoomIn'\n            },\n            {\n                icon: 'zoom-out',\n                onClick: () => {\n                    this.onZoomOut();\n                },\n                type: 'zoomOut'\n            },\n            {\n                icon: 'rotate-right',\n                onClick: () => {\n                    this.onRotateRight();\n                },\n                type: 'rotateRight'\n            },\n            {\n                icon: 'rotate-left',\n                onClick: () => {\n                    this.onRotateLeft();\n                },\n                type: 'rotateLeft'\n            }\n        ];\n        this.zoomOutDisabled = false;\n        this.position = Object.assign({}, initialPosition);\n        this.containerClick = new EventEmitter();\n        this.closeClick = new EventEmitter();\n        this.destroy$ = new Subject();\n        // TODO: move to host after View Engine deprecation\n        this.zoom = (_a = this.config.nzZoom) !== null && _a !== void 0 ? _a : 1;\n        this.rotate = (_b = this.config.nzRotate) !== null && _b !== void 0 ? _b : 0;\n        this.updateZoomOutDisabled();\n        this.updatePreviewImageTransform();\n        this.updatePreviewImageWrapperTransform();\n    }\n    get animationDisabled() {\n        var _a;\n        return (_a = this.config.nzNoAnimation) !== null && _a !== void 0 ? _a : false;\n    }\n    get maskClosable() {\n        var _a, _b;\n        const defaultConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_MODULE_NAME) || {};\n        return (_b = (_a = this.config.nzMaskClosable) !== null && _a !== void 0 ? _a : defaultConfig.nzMaskClosable) !== null && _b !== void 0 ? _b : true;\n    }\n    setImages(images) {\n        this.images = images;\n        this.cdr.markForCheck();\n    }\n    switchTo(index) {\n        this.index = index;\n        this.cdr.markForCheck();\n    }\n    next() {\n        if (this.index < this.images.length - 1) {\n            this.reset();\n            this.index++;\n            this.updatePreviewImageTransform();\n            this.updatePreviewImageWrapperTransform();\n            this.updateZoomOutDisabled();\n            this.cdr.markForCheck();\n        }\n    }\n    prev() {\n        if (this.index > 0) {\n            this.reset();\n            this.index--;\n            this.updatePreviewImageTransform();\n            this.updatePreviewImageWrapperTransform();\n            this.updateZoomOutDisabled();\n            this.cdr.markForCheck();\n        }\n    }\n    markForCheck() {\n        this.cdr.markForCheck();\n    }\n    onClose() {\n        this.closeClick.emit();\n    }\n    onZoomIn() {\n        this.zoom += 1;\n        this.updatePreviewImageTransform();\n        this.updateZoomOutDisabled();\n        this.position = Object.assign({}, initialPosition);\n    }\n    onZoomOut() {\n        if (this.zoom > 1) {\n            this.zoom -= 1;\n            this.updatePreviewImageTransform();\n            this.updateZoomOutDisabled();\n            this.position = Object.assign({}, initialPosition);\n        }\n    }\n    onRotateRight() {\n        this.rotate += 90;\n        this.updatePreviewImageTransform();\n    }\n    onRotateLeft() {\n        this.rotate -= 90;\n        this.updatePreviewImageTransform();\n    }\n    onSwitchLeft(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.prev();\n    }\n    onSwitchRight(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.next();\n    }\n    onContainerClick(e) {\n        if (e.target === e.currentTarget && this.maskClosable) {\n            this.containerClick.emit();\n        }\n    }\n    onAnimationStart(event) {\n        if (event.toState === 'enter') {\n            this.setEnterAnimationClass();\n        }\n        else if (event.toState === 'leave') {\n            this.setLeaveAnimationClass();\n        }\n        this.animationStateChanged.emit(event);\n    }\n    onAnimationDone(event) {\n        if (event.toState === 'enter') {\n            this.setEnterAnimationClass();\n        }\n        else if (event.toState === 'leave') {\n            this.setLeaveAnimationClass();\n        }\n        this.animationStateChanged.emit(event);\n    }\n    startLeaveAnimation() {\n        this.animationState = 'leave';\n        this.cdr.markForCheck();\n    }\n    onDragStarted() {\n        this.isDragging = true;\n    }\n    onDragReleased() {\n        this.isDragging = false;\n        const width = this.imageRef.nativeElement.offsetWidth * this.zoom;\n        const height = this.imageRef.nativeElement.offsetHeight * this.zoom;\n        const { left, top } = getOffset(this.imageRef.nativeElement);\n        const { width: clientWidth, height: clientHeight } = getClientSize();\n        const isRotate = this.rotate % 180 !== 0;\n        const fitContentParams = {\n            width: isRotate ? height : width,\n            height: isRotate ? width : height,\n            left,\n            top,\n            clientWidth,\n            clientHeight\n        };\n        const fitContentPos = getFitContentPosition(fitContentParams);\n        if (isNotNil(fitContentPos.x) || isNotNil(fitContentPos.y)) {\n            this.position = Object.assign(Object.assign({}, this.position), fitContentPos);\n        }\n    }\n    ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n    updatePreviewImageTransform() {\n        this.previewImageTransform = `scale3d(${this.zoom}, ${this.zoom}, 1) rotate(${this.rotate}deg)`;\n    }\n    updatePreviewImageWrapperTransform() {\n        this.previewImageWrapperTransform = `translate3d(${this.position.x}px, ${this.position.y}px, 0)`;\n    }\n    updateZoomOutDisabled() {\n        this.zoomOutDisabled = this.zoom <= 1;\n    }\n    setEnterAnimationClass() {\n        if (this.animationDisabled) {\n            return;\n        }\n        const backdropElement = this.overlayRef.backdropElement;\n        if (backdropElement) {\n            backdropElement.classList.add(FADE_CLASS_NAME_MAP.enter);\n            backdropElement.classList.add(FADE_CLASS_NAME_MAP.enterActive);\n        }\n    }\n    setLeaveAnimationClass() {\n        if (this.animationDisabled) {\n            return;\n        }\n        const backdropElement = this.overlayRef.backdropElement;\n        if (backdropElement) {\n            backdropElement.classList.add(FADE_CLASS_NAME_MAP.leave);\n            backdropElement.classList.add(FADE_CLASS_NAME_MAP.leaveActive);\n        }\n    }\n    reset() {\n        this.zoom = 1;\n        this.rotate = 0;\n        this.position = Object.assign({}, initialPosition);\n    }\n}\nNzImagePreviewComponent.ɵfac = function NzImagePreviewComponent_Factory(t) { return new (t || NzImagePreviewComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NzConfigService), ɵngcc0.ɵɵdirectiveInject(NzImagePreviewOptions), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.OverlayRef)); };\nNzImagePreviewComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: NzImagePreviewComponent, selectors: [[\"nz-image-preview\"]], viewQuery: function NzImagePreviewComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c1, 5);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.imageRef = _t.first);\n    } }, hostAttrs: [\"tabindex\", \"-1\", \"role\", \"document\"], hostVars: 8, hostBindings: function NzImagePreviewComponent_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵsyntheticHostListener(\"@fadeMotion.start\", function NzImagePreviewComponent_animation_fadeMotion_start_HostBindingHandler($event) { return ctx.onAnimationStart($event); })(\"@fadeMotion.done\", function NzImagePreviewComponent_animation_fadeMotion_done_HostBindingHandler($event) { return ctx.onAnimationDone($event); });\n        ɵngcc0.ɵɵlistener(\"click\", function NzImagePreviewComponent_click_HostBindingHandler($event) { return ctx.onContainerClick($event); });\n    } if (rf & 2) {\n        ɵngcc0.ɵɵsyntheticHostProperty(\"@.disabled\", ctx.config.nzNoAnimation)(\"@fadeMotion\", ctx.animationState);\n        ɵngcc0.ɵɵstyleProp(\"z-index\", ctx.config.nzZIndex);\n        ɵngcc0.ɵɵclassProp(\"ant-image-preview-moving\", ctx.isDragging)(\"ant-image-preview-wrap\", true);\n    } }, exportAs: [\"nzImagePreview\"], decls: 10, vars: 6, consts: [[1, \"ant-image-preview\"], [\"tabindex\", \"0\", \"aria-hidden\", \"true\", 2, \"width\", \"0\", \"height\", \"0\", \"overflow\", \"hidden\", \"outline\", \"none\"], [1, \"ant-image-preview-content\"], [1, \"ant-image-preview-body\"], [1, \"ant-image-preview-operations\"], [\"class\", \"ant-image-preview-operations-operation\", 3, \"ant-image-preview-operations-operation-disabled\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDrag\", \"\", 1, \"ant-image-preview-img-wrapper\", 3, \"cdkDragFreeDragPosition\", \"mousedown\", \"cdkDragReleased\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"ant-image-preview-operations-operation\", 3, \"click\"], [\"nz-icon\", \"\", \"nzTheme\", \"outline\", 1, \"ant-image-preview-operations-icon\", 3, \"nzType\"], [\"cdkDragHandle\", \"\", \"class\", \"ant-image-preview-img\", 3, \"width\", \"height\", \"transform\", 4, \"ngIf\"], [\"cdkDragHandle\", \"\", 1, \"ant-image-preview-img\"], [\"imgRef\", \"\"], [1, \"ant-image-preview-switch-left\", 3, \"click\"], [\"nz-icon\", \"\", \"nzType\", \"left\", \"nzTheme\", \"outline\"], [1, \"ant-image-preview-switch-right\", 3, \"click\"], [\"nz-icon\", \"\", \"nzType\", \"right\", \"nzTheme\", \"outline\"]], template: function NzImagePreviewComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelement(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"div\", 3);\n        ɵngcc0.ɵɵelementStart(4, \"ul\", 4);\n        ɵngcc0.ɵɵtemplate(5, NzImagePreviewComponent_li_5_Template, 2, 3, \"li\", 5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"div\", 6);\n        ɵngcc0.ɵɵlistener(\"mousedown\", function NzImagePreviewComponent_Template_div_mousedown_6_listener() { return ctx.onDragStarted(); })(\"cdkDragReleased\", function NzImagePreviewComponent_Template_div_cdkDragReleased_6_listener() { return ctx.onDragReleased(); });\n        ɵngcc0.ɵɵtemplate(7, NzImagePreviewComponent_ng_container_7_Template, 2, 1, \"ng-container\", 7);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(8, NzImagePreviewComponent_ng_container_8_Template, 5, 4, \"ng-container\", 8);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(9, \"div\", 1);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.operations);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵstyleProp(\"transform\", ctx.previewImageWrapperTransform);\n        ɵngcc0.ɵɵproperty(\"cdkDragFreeDragPosition\", ctx.position);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.images);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.images.length > 1);\n    } }, directives: [ɵngcc3.NgForOf, ɵngcc4.CdkDrag, ɵngcc3.NgIf, ɵngcc5.NzIconDirective, ɵngcc4.CdkDragHandle], encapsulation: 2, data: { animation: [fadeMotion] }, changeDetection: 0 });\nNzImagePreviewComponent.ctorParameters = () => [\n    { type: ChangeDetectorRef },\n    { type: NzConfigService },\n    { type: NzImagePreviewOptions },\n    { type: OverlayRef }\n];\nNzImagePreviewComponent.propDecorators = {\n    imageRef: [{ type: ViewChild, args: ['imgRef',] }]\n};\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nclass NzImageService {\n    constructor(overlay, injector, nzConfigService, directionality) {\n        this.overlay = overlay;\n        this.injector = injector;\n        this.nzConfigService = nzConfigService;\n        this.directionality = directionality;\n    }\n    preview(images, options) {\n        return this.display(images, options);\n    }\n    display(images, config) {\n        const configMerged = Object.assign(Object.assign({}, new NzImagePreviewOptions()), (config !== null && config !== void 0 ? config : {}));\n        const overlayRef = this.createOverlay(configMerged);\n        const previewComponent = this.attachPreviewComponent(overlayRef, configMerged);\n        previewComponent.setImages(images);\n        const previewRef = new NzImagePreviewRef(previewComponent, configMerged, overlayRef);\n        previewComponent.previewRef = previewRef;\n        return previewRef;\n    }\n    attachPreviewComponent(overlayRef, config) {\n        const injector = Injector.create({\n            parent: this.injector,\n            providers: [\n                { provide: OverlayRef, useValue: overlayRef },\n                { provide: NzImagePreviewOptions, useValue: config }\n            ]\n        });\n        const containerPortal = new ComponentPortal(NzImagePreviewComponent, null, injector);\n        const containerRef = overlayRef.attach(containerPortal);\n        return containerRef.instance;\n    }\n    createOverlay(config) {\n        var _a, _b;\n        const globalConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_MODULE_NAME) || {};\n        const overLayConfig = new OverlayConfig({\n            hasBackdrop: true,\n            scrollStrategy: this.overlay.scrollStrategies.block(),\n            positionStrategy: this.overlay.position().global(),\n            disposeOnNavigation: (_b = (_a = config.nzCloseOnNavigation) !== null && _a !== void 0 ? _a : globalConfig.nzCloseOnNavigation) !== null && _b !== void 0 ? _b : true,\n            backdropClass: IMAGE_PREVIEW_MASK_CLASS_NAME,\n            direction: config.nzDirection || globalConfig.nzDirection || this.directionality.value\n        });\n        return this.overlay.create(overLayConfig);\n    }\n}\nNzImageService.ɵfac = function NzImageService_Factory(t) { return new (t || NzImageService)(ɵngcc0.ɵɵinject(ɵngcc2.Overlay), ɵngcc0.ɵɵinject(ɵngcc0.Injector), ɵngcc0.ɵɵinject(ɵngcc1.NzConfigService), ɵngcc0.ɵɵinject(ɵngcc6.Directionality, 8)); };\nNzImageService.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: NzImageService, factory: NzImageService.ɵfac });\nNzImageService.ctorParameters = () => [\n    { type: Overlay },\n    { type: Injector },\n    { type: NzConfigService },\n    { type: Directionality, decorators: [{ type: Optional }] }\n];\n\nconst NZ_CONFIG_MODULE_NAME$1 = 'image';\nclass NzImageDirective {\n    constructor(document, nzConfigService, elementRef, nzImageService, cdr, parentGroup, directionality) {\n        this.document = document;\n        this.nzConfigService = nzConfigService;\n        this.elementRef = elementRef;\n        this.nzImageService = nzImageService;\n        this.cdr = cdr;\n        this.parentGroup = parentGroup;\n        this.directionality = directionality;\n        this._nzModuleName = NZ_CONFIG_MODULE_NAME$1;\n        this.nzSrc = '';\n        this.nzDisablePreview = false;\n        this.nzFallback = null;\n        this.nzPlaceholder = null;\n        this.status = 'normal';\n        this.destroy$ = new Subject();\n    }\n    get previewable() {\n        return !this.nzDisablePreview && this.status !== 'error';\n    }\n    ngOnInit() {\n        var _a;\n        this.backLoad();\n        if (this.parentGroup) {\n            this.parentGroup.addImage(this);\n        }\n        if (this.directionality) {\n            (_a = this.directionality.change) === null || _a === void 0 ? void 0 : _a.pipe(takeUntil(this.destroy$)).subscribe((direction) => {\n                this.dir = direction;\n                this.cdr.detectChanges();\n            });\n            this.dir = this.directionality.value;\n        }\n    }\n    ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n    onPreview() {\n        if (!this.previewable) {\n            return;\n        }\n        if (this.parentGroup) {\n            // preview inside image group\n            const previewAbleImages = this.parentGroup.images.filter(e => e.previewable);\n            const previewImages = previewAbleImages.map(e => ({ src: e.nzSrc }));\n            const previewIndex = previewAbleImages.findIndex(el => this === el);\n            const previewRef = this.nzImageService.preview(previewImages, { nzDirection: this.dir });\n            previewRef.switchTo(previewIndex);\n        }\n        else {\n            // preview not inside image group\n            const previewImages = [{ src: this.nzSrc }];\n            this.nzImageService.preview(previewImages, { nzDirection: this.dir });\n        }\n    }\n    getElement() {\n        return this.elementRef;\n    }\n    ngOnChanges(changes) {\n        const { nzSrc } = changes;\n        if (nzSrc) {\n            this.getElement().nativeElement.src = nzSrc.currentValue;\n            this.backLoad();\n        }\n    }\n    /**\n     * use internal Image object handle fallback & placeholder\n     * @private\n     */\n    backLoad() {\n        this.backLoadImage = this.document.createElement('img');\n        this.backLoadImage.src = this.nzSrc;\n        this.status = 'loading';\n        if (this.backLoadImage.complete) {\n            this.status = 'normal';\n            this.getElement().nativeElement.src = this.nzSrc;\n        }\n        else {\n            if (this.nzPlaceholder) {\n                this.getElement().nativeElement.src = this.nzPlaceholder;\n            }\n            else {\n                this.getElement().nativeElement.src = this.nzSrc;\n            }\n            this.backLoadImage.onload = () => {\n                this.status = 'normal';\n                this.getElement().nativeElement.src = this.nzSrc;\n            };\n            this.backLoadImage.onerror = () => {\n                this.status = 'error';\n                if (this.nzFallback) {\n                    this.getElement().nativeElement.src = this.nzFallback;\n                }\n            };\n        }\n    }\n}\nNzImageDirective.ɵfac = function NzImageDirective_Factory(t) { return new (t || NzImageDirective)(ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NzConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NzImageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NzImageGroupComponent, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc6.Directionality, 8)); };\nNzImageDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: NzImageDirective, selectors: [[\"img\", \"nz-image\", \"\"]], hostBindings: function NzImageDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NzImageDirective_click_HostBindingHandler() { return ctx.onPreview(); });\n    } }, inputs: { nzSrc: \"nzSrc\", nzDisablePreview: \"nzDisablePreview\", nzFallback: \"nzFallback\", nzPlaceholder: \"nzPlaceholder\" }, exportAs: [\"nzImage\"], features: [ɵngcc0.ɵɵNgOnChangesFeature] });\nNzImageDirective.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: NzConfigService },\n    { type: ElementRef },\n    { type: NzImageService },\n    { type: ChangeDetectorRef },\n    { type: NzImageGroupComponent, decorators: [{ type: Optional }] },\n    { type: Directionality, decorators: [{ type: Optional }] }\n];\nNzImageDirective.propDecorators = {\n    nzSrc: [{ type: Input }],\n    nzDisablePreview: [{ type: Input }],\n    nzFallback: [{ type: Input }],\n    nzPlaceholder: [{ type: Input }]\n};\n__decorate([\n    InputBoolean(),\n    WithConfig(),\n    __metadata(\"design:type\", Boolean)\n], NzImageDirective.prototype, \"nzDisablePreview\", void 0);\n__decorate([\n    WithConfig(),\n    __metadata(\"design:type\", Object)\n], NzImageDirective.prototype, \"nzFallback\", void 0);\n__decorate([\n    WithConfig(),\n    __metadata(\"design:type\", Object)\n], NzImageDirective.prototype, \"nzPlaceholder\", void 0);\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NzImageGroupComponent, [{\n        type: Component,\n        args: [{\n                selector: 'nz-image-group',\n                exportAs: 'nzImageGroup',\n                template: '<ng-content></ng-content>',\n                preserveWhitespaces: false,\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                encapsulation: ViewEncapsulation.None\n            }]\n    }], function () { return []; }, null); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NzImagePreviewComponent, [{\n        type: Component,\n        args: [{\n                selector: 'nz-image-preview',\n                exportAs: 'nzImagePreview',\n                animations: [fadeMotion],\n                template: `\n    <div class=\"ant-image-preview\">\n      <div tabindex=\"0\" aria-hidden=\"true\" style=\"width: 0; height: 0; overflow: hidden; outline: none;\"></div>\n      <div class=\"ant-image-preview-content\">\n        <div class=\"ant-image-preview-body\">\n          <ul class=\"ant-image-preview-operations\">\n            <li\n              class=\"ant-image-preview-operations-operation\"\n              [class.ant-image-preview-operations-operation-disabled]=\"zoomOutDisabled && option.type === 'zoomOut'\"\n              (click)=\"option.onClick()\"\n              *ngFor=\"let option of operations\"\n            >\n              <span class=\"ant-image-preview-operations-icon\" nz-icon [nzType]=\"option.icon\" nzTheme=\"outline\"></span>\n            </li>\n          </ul>\n          <div\n            class=\"ant-image-preview-img-wrapper\"\n            cdkDrag\n            [style.transform]=\"previewImageWrapperTransform\"\n            [cdkDragFreeDragPosition]=\"position\"\n            (mousedown)=\"onDragStarted()\"\n            (cdkDragReleased)=\"onDragReleased()\"\n          >\n            <ng-container *ngFor=\"let image of images; index as imageIndex\">\n              <img\n                cdkDragHandle\n                class=\"ant-image-preview-img\"\n                #imgRef\n                *ngIf=\"index === imageIndex\"\n                [attr.src]=\"image.src\"\n                [attr.alt]=\"image.alt\"\n                [style.width]=\"image.width\"\n                [style.height]=\"image.height\"\n                [style.transform]=\"previewImageTransform\"\n              />\n            </ng-container>\n          </div>\n          <ng-container *ngIf=\"images.length > 1\">\n            <div\n              class=\"ant-image-preview-switch-left\"\n              [class.ant-image-preview-switch-left-disabled]=\"index <= 0\"\n              (click)=\"onSwitchLeft($event)\"\n            >\n              <span nz-icon nzType=\"left\" nzTheme=\"outline\"></span>\n            </div>\n            <div\n              class=\"ant-image-preview-switch-right\"\n              [class.ant-image-preview-switch-right-disabled]=\"index >= images.length - 1\"\n              (click)=\"onSwitchRight($event)\"\n            >\n              <span nz-icon nzType=\"right\" nzTheme=\"outline\"></span>\n            </div>\n          </ng-container>\n        </div>\n      </div>\n      <div tabindex=\"0\" aria-hidden=\"true\" style=\"width: 0; height: 0; overflow: hidden; outline: none;\"></div>\n    </div>\n  `,\n                preserveWhitespaces: false,\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                encapsulation: ViewEncapsulation.None,\n                host: {\n                    '[class.ant-image-preview-moving]': 'isDragging',\n                    '[style.zIndex]': 'config.nzZIndex',\n                    '[class.ant-image-preview-wrap]': 'true',\n                    '[@.disabled]': 'config.nzNoAnimation',\n                    '[@fadeMotion]': 'animationState',\n                    '(@fadeMotion.start)': 'onAnimationStart($event)',\n                    '(@fadeMotion.done)': 'onAnimationDone($event)',\n                    '(click)': 'onContainerClick($event)',\n                    tabindex: '-1',\n                    role: 'document'\n                }\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc1.NzConfigService }, { type: NzImagePreviewOptions }, { type: ɵngcc2.OverlayRef }]; }, { imageRef: [{\n            type: ViewChild,\n            args: ['imgRef']\n        }] }); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NzImageService, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc2.Overlay }, { type: ɵngcc0.Injector }, { type: ɵngcc1.NzConfigService }, { type: ɵngcc6.Directionality, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NzImageDirective, [{\n        type: Directive,\n        args: [{\n                selector: 'img[nz-image]',\n                exportAs: 'nzImage',\n                host: {\n                    '(click)': 'onPreview()'\n                }\n            }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ɵngcc1.NzConfigService }, { type: ɵngcc0.ElementRef }, { type: NzImageService }, { type: ɵngcc0.ChangeDetectorRef }, { type: NzImageGroupComponent, decorators: [{\n                type: Optional\n            }] }, { type: ɵngcc6.Directionality, decorators: [{\n                type: Optional\n            }] }]; }, { nzSrc: [{\n            type: Input\n        }], nzDisablePreview: [{\n            type: Input\n        }], nzFallback: [{\n            type: Input\n        }], nzPlaceholder: [{\n            type: Input\n        }] }); })();\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nclass NzImageModule {\n}\nNzImageModule.ɵfac = function NzImageModule_Factory(t) { return new (t || NzImageModule)(); };\nNzImageModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: NzImageModule });\nNzImageModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ providers: [NzImageService], imports: [[BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, NzIconModule, NzPipesModule]] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NzImageModule, [{\n        type: NgModule,\n        args: [{\n                imports: [BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, NzIconModule, NzPipesModule],\n                exports: [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent],\n                providers: [NzImageService],\n                entryComponents: [NzImagePreviewComponent],\n                declarations: [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NzImageModule, { declarations: function () { return [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent]; }, imports: function () { return [BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, NzIconModule, NzPipesModule]; }, exports: function () { return [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent]; } }); })();\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { FADE_CLASS_NAME_MAP, IMAGE_PREVIEW_MASK_CLASS_NAME, NZ_CONFIG_MODULE_NAME, NzImageDirective, NzImageGroupComponent, NzImageModule, NzImagePreviewComponent, NzImagePreviewOptions, NzImagePreviewRef, NzImageService, getClientSize, getFitContentPosition, getOffset };\n\n//# sourceMappingURL=ng-zorro-antd-image.js.map"]},"metadata":{},"sourceType":"module"}